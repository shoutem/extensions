!function(e){function t(t){for(var a,l,u=t[0],i=t[1],c=t[2],d=0,f=[];d<u.length;d++)l=u[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&f.push(r[l][0]),r[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={0:0},o=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var s=i;o.push([839,1]),n()}({1042:function(e,t){},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.TARGET_VALUES=t.DEFAULT_JOURNEY_NOTIFICATION=void 0;t.moduleName="notification-journeys";var a=t.TARGET_VALUES={URL:"url",SCREEN:"screen"};t.DEFAULT_JOURNEY_NOTIFICATION={body:"",contentUrl:"",shortcutId:"",delay:1,action:"",target:{value:a.URL},title:""}},1228:function(e,t,n){var a={"./af":467,"./af.js":467,"./ar":468,"./ar-dz":469,"./ar-dz.js":469,"./ar-kw":470,"./ar-kw.js":470,"./ar-ly":471,"./ar-ly.js":471,"./ar-ma":472,"./ar-ma.js":472,"./ar-ps":473,"./ar-ps.js":473,"./ar-sa":474,"./ar-sa.js":474,"./ar-tn":475,"./ar-tn.js":475,"./ar.js":468,"./az":476,"./az.js":476,"./be":477,"./be.js":477,"./bg":478,"./bg.js":478,"./bm":479,"./bm.js":479,"./bn":480,"./bn-bd":481,"./bn-bd.js":481,"./bn.js":480,"./bo":482,"./bo.js":482,"./br":483,"./br.js":483,"./bs":484,"./bs.js":484,"./ca":485,"./ca.js":485,"./cs":486,"./cs.js":486,"./cv":487,"./cv.js":487,"./cy":488,"./cy.js":488,"./da":489,"./da.js":489,"./de":490,"./de-at":491,"./de-at.js":491,"./de-ch":492,"./de-ch.js":492,"./de.js":490,"./dv":493,"./dv.js":493,"./el":494,"./el.js":494,"./en-au":495,"./en-au.js":495,"./en-ca":496,"./en-ca.js":496,"./en-gb":497,"./en-gb.js":497,"./en-ie":498,"./en-ie.js":498,"./en-il":499,"./en-il.js":499,"./en-in":500,"./en-in.js":500,"./en-nz":501,"./en-nz.js":501,"./en-sg":502,"./en-sg.js":502,"./eo":503,"./eo.js":503,"./es":504,"./es-do":505,"./es-do.js":505,"./es-mx":506,"./es-mx.js":506,"./es-us":507,"./es-us.js":507,"./es.js":504,"./et":508,"./et.js":508,"./eu":509,"./eu.js":509,"./fa":510,"./fa.js":510,"./fi":511,"./fi.js":511,"./fil":512,"./fil.js":512,"./fo":513,"./fo.js":513,"./fr":514,"./fr-ca":515,"./fr-ca.js":515,"./fr-ch":516,"./fr-ch.js":516,"./fr.js":514,"./fy":517,"./fy.js":517,"./ga":518,"./ga.js":518,"./gd":519,"./gd.js":519,"./gl":520,"./gl.js":520,"./gom-deva":521,"./gom-deva.js":521,"./gom-latn":522,"./gom-latn.js":522,"./gu":523,"./gu.js":523,"./he":524,"./he.js":524,"./hi":525,"./hi.js":525,"./hr":526,"./hr.js":526,"./hu":527,"./hu.js":527,"./hy-am":528,"./hy-am.js":528,"./id":529,"./id.js":529,"./is":530,"./is.js":530,"./it":531,"./it-ch":532,"./it-ch.js":532,"./it.js":531,"./ja":533,"./ja.js":533,"./jv":534,"./jv.js":534,"./ka":535,"./ka.js":535,"./kk":536,"./kk.js":536,"./km":537,"./km.js":537,"./kn":538,"./kn.js":538,"./ko":539,"./ko.js":539,"./ku":540,"./ku-kmr":541,"./ku-kmr.js":541,"./ku.js":540,"./ky":542,"./ky.js":542,"./lb":543,"./lb.js":543,"./lo":544,"./lo.js":544,"./lt":545,"./lt.js":545,"./lv":546,"./lv.js":546,"./me":547,"./me.js":547,"./mi":548,"./mi.js":548,"./mk":549,"./mk.js":549,"./ml":550,"./ml.js":550,"./mn":551,"./mn.js":551,"./mr":552,"./mr.js":552,"./ms":553,"./ms-my":554,"./ms-my.js":554,"./ms.js":553,"./mt":555,"./mt.js":555,"./my":556,"./my.js":556,"./nb":557,"./nb.js":557,"./ne":558,"./ne.js":558,"./nl":559,"./nl-be":560,"./nl-be.js":560,"./nl.js":559,"./nn":561,"./nn.js":561,"./oc-lnc":562,"./oc-lnc.js":562,"./pa-in":563,"./pa-in.js":563,"./pl":564,"./pl.js":564,"./pt":565,"./pt-br":566,"./pt-br.js":566,"./pt.js":565,"./ro":567,"./ro.js":567,"./ru":568,"./ru.js":568,"./sd":569,"./sd.js":569,"./se":570,"./se.js":570,"./si":571,"./si.js":571,"./sk":572,"./sk.js":572,"./sl":573,"./sl.js":573,"./sq":574,"./sq.js":574,"./sr":575,"./sr-cyrl":576,"./sr-cyrl.js":576,"./sr.js":575,"./ss":577,"./ss.js":577,"./sv":578,"./sv.js":578,"./sw":579,"./sw.js":579,"./ta":580,"./ta.js":580,"./te":581,"./te.js":581,"./tet":582,"./tet.js":582,"./tg":583,"./tg.js":583,"./th":584,"./th.js":584,"./tk":585,"./tk.js":585,"./tl-ph":586,"./tl-ph.js":586,"./tlh":587,"./tlh.js":587,"./tr":588,"./tr.js":588,"./tzl":589,"./tzl.js":589,"./tzm":590,"./tzm-latn":591,"./tzm-latn.js":591,"./tzm.js":590,"./ug-cn":592,"./ug-cn.js":592,"./uk":593,"./uk.js":593,"./ur":594,"./ur.js":594,"./uz":595,"./uz-latn":596,"./uz-latn.js":596,"./uz.js":595,"./vi":597,"./vi.js":597,"./x-pseudo":598,"./x-pseudo.js":598,"./yo":599,"./yo.js":599,"./zh-cn":600,"./zh-cn.js":600,"./zh-hk":601,"./zh-hk.js":601,"./zh-mo":602,"./zh-mo.js":602,"./zh-tw":603,"./zh-tw.js":603};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1228},1235:function(e,t,n){var a={"./af":604,"./af.js":604,"./ar":605,"./ar-dz":606,"./ar-dz.js":606,"./ar-kw":607,"./ar-kw.js":607,"./ar-ly":608,"./ar-ly.js":608,"./ar-ma":609,"./ar-ma.js":609,"./ar-sa":610,"./ar-sa.js":610,"./ar-tn":611,"./ar-tn.js":611,"./ar.js":605,"./az":612,"./az.js":612,"./be":613,"./be.js":613,"./bg":614,"./bg.js":614,"./bm":615,"./bm.js":615,"./bn":616,"./bn-bd":617,"./bn-bd.js":617,"./bn.js":616,"./bo":618,"./bo.js":618,"./br":619,"./br.js":619,"./bs":620,"./bs.js":620,"./ca":621,"./ca.js":621,"./cs":622,"./cs.js":622,"./cv":623,"./cv.js":623,"./cy":624,"./cy.js":624,"./da":625,"./da.js":625,"./de":626,"./de-at":627,"./de-at.js":627,"./de-ch":628,"./de-ch.js":628,"./de.js":626,"./dv":629,"./dv.js":629,"./el":630,"./el.js":630,"./en-au":631,"./en-au.js":631,"./en-ca":632,"./en-ca.js":632,"./en-gb":633,"./en-gb.js":633,"./en-ie":634,"./en-ie.js":634,"./en-il":635,"./en-il.js":635,"./en-in":636,"./en-in.js":636,"./en-nz":637,"./en-nz.js":637,"./en-sg":638,"./en-sg.js":638,"./eo":639,"./eo.js":639,"./es":640,"./es-do":641,"./es-do.js":641,"./es-mx":642,"./es-mx.js":642,"./es-us":643,"./es-us.js":643,"./es.js":640,"./et":644,"./et.js":644,"./eu":645,"./eu.js":645,"./fa":646,"./fa.js":646,"./fi":647,"./fi.js":647,"./fil":648,"./fil.js":648,"./fo":649,"./fo.js":649,"./fr":650,"./fr-ca":651,"./fr-ca.js":651,"./fr-ch":652,"./fr-ch.js":652,"./fr.js":650,"./fy":653,"./fy.js":653,"./ga":654,"./ga.js":654,"./gd":655,"./gd.js":655,"./gl":656,"./gl.js":656,"./gom-deva":657,"./gom-deva.js":657,"./gom-latn":658,"./gom-latn.js":658,"./gu":659,"./gu.js":659,"./he":660,"./he.js":660,"./hi":661,"./hi.js":661,"./hr":662,"./hr.js":662,"./hu":663,"./hu.js":663,"./hy-am":664,"./hy-am.js":664,"./id":665,"./id.js":665,"./is":666,"./is.js":666,"./it":667,"./it-ch":668,"./it-ch.js":668,"./it.js":667,"./ja":669,"./ja.js":669,"./jv":670,"./jv.js":670,"./ka":671,"./ka.js":671,"./kk":672,"./kk.js":672,"./km":673,"./km.js":673,"./kn":674,"./kn.js":674,"./ko":675,"./ko.js":675,"./ku":676,"./ku.js":676,"./ky":677,"./ky.js":677,"./lb":678,"./lb.js":678,"./lo":679,"./lo.js":679,"./lt":680,"./lt.js":680,"./lv":681,"./lv.js":681,"./me":682,"./me.js":682,"./mi":683,"./mi.js":683,"./mk":684,"./mk.js":684,"./ml":685,"./ml.js":685,"./mn":686,"./mn.js":686,"./mr":687,"./mr.js":687,"./ms":688,"./ms-my":689,"./ms-my.js":689,"./ms.js":688,"./mt":690,"./mt.js":690,"./my":691,"./my.js":691,"./nb":692,"./nb.js":692,"./ne":693,"./ne.js":693,"./nl":694,"./nl-be":695,"./nl-be.js":695,"./nl.js":694,"./nn":696,"./nn.js":696,"./oc-lnc":697,"./oc-lnc.js":697,"./pa-in":698,"./pa-in.js":698,"./pl":699,"./pl.js":699,"./pt":700,"./pt-br":701,"./pt-br.js":701,"./pt.js":700,"./ro":702,"./ro.js":702,"./ru":703,"./ru.js":703,"./sd":704,"./sd.js":704,"./se":705,"./se.js":705,"./si":706,"./si.js":706,"./sk":707,"./sk.js":707,"./sl":708,"./sl.js":708,"./sq":709,"./sq.js":709,"./sr":710,"./sr-cyrl":711,"./sr-cyrl.js":711,"./sr.js":710,"./ss":712,"./ss.js":712,"./sv":713,"./sv.js":713,"./sw":714,"./sw.js":714,"./ta":715,"./ta.js":715,"./te":716,"./te.js":716,"./tet":717,"./tet.js":717,"./tg":718,"./tg.js":718,"./th":719,"./th.js":719,"./tk":720,"./tk.js":720,"./tl-ph":721,"./tl-ph.js":721,"./tlh":722,"./tlh.js":722,"./tr":723,"./tr.js":723,"./tzl":724,"./tzl.js":724,"./tzm":725,"./tzm-latn":726,"./tzm-latn.js":726,"./tzm.js":725,"./ug-cn":727,"./ug-cn.js":727,"./uk":728,"./uk.js":728,"./ur":729,"./ur.js":729,"./uz":730,"./uz-latn":731,"./uz-latn.js":731,"./uz.js":730,"./vi":732,"./vi.js":732,"./x-pseudo":733,"./x-pseudo.js":733,"./yo":734,"./yo.js":734,"./zh-cn":735,"./zh-cn.js":735,"./zh-hk":736,"./zh-hk.js":736,"./zh-mo":737,"./zh-mo.js":737,"./zh-tw":738,"./zh-tw.js":738};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1235},1376:function(e,t,n){var a={"./ckb.js":209,"./da.js":210,"./de.js":211,"./en.js":116,"./es.js":212,"./fr.js":213,"./he.js":214,"./index.js":1377,"./it.js":215,"./ja.js":216,"./ko.js":217,"./lv.js":218,"./nl.js":219,"./pl.js":220,"./pt_br.js":221,"./ro.js":222,"./ru.js":223,"./se.js":224,"./ua.js":225,"./zh_cn.js":226};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1376},1414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeneralPage",{enumerable:!0,get:function(){return a.GeneralPage}}),Object.defineProperty(t,"GroupsPage",{enumerable:!0,get:function(){return r.GroupsPage}}),Object.defineProperty(t,"JourneysPage",{enumerable:!0,get:function(){return o.JourneysPage}}),Object.defineProperty(t,"NotificationsPage",{enumerable:!0,get:function(){return l.NotificationsPage}});var a=n(1415),r=n(1605),o=n(1607),l=n(1611)},1415:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeneralPage",{enumerable:!0,get:function(){return r.default}});var r=a(n(1416))},1416:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(15)),l=a(n(8)),u=a(n(9)),i=a(n(11)),c=a(n(12)),s=a(n(6)),d=a(n(10)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),p=n(18),m=n(45),v=a(n(19)),E=a(n(27)),g=a(n(20)),b=a(n(0)),h=n(39),y=a(n(34)),_=n(1418),O=n(202),j=n(37),N=n(52),T=n(24),P=a(n(1603));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t=(0,c.default)(t),(0,i.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}n(1604);var L=function(e){function t(e){var n;(0,l.default)(this,t),n=A(this,t,[e]),(0,v.default)((0,s.default)(n));var a=e.extension.settings,r=void 0===a?{}:a,o=r.chime,u=void 0===o?{}:o,i=r.scheduledNotificationsEnabled,c=void 0!==i&&i,d=r.reminder,f=void 0===d?{}:d;return n.state={chime:u,reminder:f,scheduledNotificationsEnabled:c,shouldInvalidateCurrentBuild:!1,error:!1,submitting:!1},n}return(0,d.default)(t,e),(0,u.default)(t,[{key:"handleChimeUpload",value:function(e,t){this.setState({chime:e,shouldInvalidateCurrentBuild:t})}},{key:"handleChimeDelete",value:function(e){this.setState({chime:{fileName:null,fileUrl:null},shouldInvalidateCurrentBuild:e})}},{key:"handleReminderMessageChange",value:function(e){var t=this.state.reminder,n=e.target.value,a=R(R({},t),{},{message:n});this.setState({reminder:a})}},{key:"handleReminderToggle",value:function(e){var t,n=this.props.extension.settings,a="true"===e,r=a?null===(t=(void 0===n?{}:n).reminder)||void 0===t?void 0:t.message:"";this.setState({reminder:{message:r,enabled:a}})}},{key:"handleScheduledNotificationsToggle",value:function(e){var t="true"===e;this.setState({scheduledNotificationsEnabled:t})}},{key:"handleSave",value:function(){var e=this,t=this.props,n=t.extension,a=t.invalidateCurrentBuild,r=t.updateExtensionSettings,o=this.state,l=o.chime,u=o.reminder,i=o.scheduledNotificationsEnabled,c=o.shouldInvalidateCurrentBuild;if(u.enabled&&g.default.isEmpty(u.message))this.setState({error:E.default.t(P.default.ERROR_MESSAGE)});else{this.setState({submitting:!0});var s=R(R({},n.settings),{},{chime:l,reminder:u,scheduledNotificationsEnabled:i});r(n,s).then((function(){c&&a(n.app),e.setState({chime:l,error:null,submitting:!1})}))}}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.handleSave()}},{key:"render",value:function(){var e,t=this.props,n=t.extension,a=t.extension.settings,r=void 0===a?{}:a,o=this.state,l=o.chime,u=o.error,i=o.reminder,c=o.scheduledNotificationsEnabled,s=o.submitting,d=n.app,m=null===(e=r.services)||void 0===e||null===(e=e.core)||void 0===e?void 0:e.apps,v={chime:r.chime,reminder:r.reminder,scheduledNotificationsEnabled:r.scheduledNotificationsEnabled},g=s||!function(e,t){return JSON.stringify(e)!==JSON.stringify(t)}(v,{chime:l,reminder:i,scheduledNotificationsEnabled:c}),b=s||!(0,T.isInitialized)(n)||(0,T.isBusy)(n);return f.default.createElement("form",{className:"settings-page",onSubmit:this.handleSubmit},f.default.createElement(j.LoaderContainer,{isOverlay:!0,isLoading:b},f.default.createElement(_.ChimeUploader,{appsUrl:m,appId:d,chime:l,onDelete:this.handleChimeDelete,onUploadSuccess:this.handleChimeUpload}),f.default.createElement(_.NotificationSettings,{appId:d,appsUrl:m,onReminderMessageChange:this.handleReminderMessageChange,onScheduledNotificationsToggle:this.handleScheduledNotificationsToggle,onToggleReminder:this.handleReminderToggle,reminder:i,scheduledNotificationsEnabled:c}),f.default.createElement(p.ButtonToolbar,null,f.default.createElement(p.Button,{bsSize:"large",bsStyle:"primary",disabled:g,type:"submit"},f.default.createElement(j.LoaderContainer,{isLoading:s},E.default.t(P.default.BUTTON_SAVE)))),u&&f.default.createElement("div",{className:"has-error"},f.default.createElement(p.HelpBlock,null,u))))}}]),t}(f.PureComponent);L.propTypes={extension:b.default.object.isRequired};t.default=(0,m.connect)((function(e){return{extension:(0,N.getExtension)(e,(0,y.default)())}}),(function(e){return(0,h.bindActionCreators)({invalidateCurrentBuild:O.invalidateCurrentBuild,updateExtensionSettings:N.updateExtensionSettings},e)}))(L)},1417:function(e){e.exports=JSON.parse('{"name":"shoutem.notification-center","version":"9.0.1-rc.0","description":"Manage push notification settings within the app","scripts":{"lint":"eslint --no-eslintrc -c .eslintrc src/**/*.{js,jsx}","clean":"rimraf ./build/*","build":"npm run clean && cross-env NODE_ENV=production webpack --config ./bin/webpack/webpack.config.js","dev":"webpack-dev-server --config ./bin/webpack/webpack.config.js"},"devDependencies":{"@babel/core":"^7.8.4","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-transform-modules-commonjs":"^7.8.3","@babel/plugin-transform-runtime":"^7.8.3","@babel/preset-env":"^7.8.4","@babel/preset-react":"^7.8.3","@shoutem/eslint-config-react":"^1.0.5","babel-eslint":"^10.1.0","babel-loader":"^8.0.6","cross-env":"^4.0.0","css-loader":"^3.4.2","cssnano":"^4.1.10","eslint":"^6.8.0","eslint-loader":"^3.0.3","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.24.2","eslint-plugin-jsx-a11y":"^6.4.0","eslint-plugin-prettier":"3.1.3","eslint-plugin-react":"^7.21.5","file-loader":"^6.0.0","html-webpack-plugin":"^4.0.3","mini-css-extract-plugin":"0.9.0","optimize-css-assets-webpack-plugin":"5.0.3","terser-webpack-plugin":"2.3.5","path":"^0.12.7","postcss-loader":"^3.0.0","prettier":"1.19.1","rimraf":"^3.0.2","sass":"1.54.1","sass-loader":"10.2.0","style-loader":"^1.1.3","url-loader":"^3.0.0","webpack":"^4.41.6","webpack-cli":"^3.3.11","webpack-dev-server":"^3.10.3","eslint-plugin-react-hooks":"^4.2.0","eslint-plugin-simple-import-sort":"^7.0.0"},"dependencies":{"@shoutem/assets-sdk":"^1.0.1","@shoutem/extension-sandbox":"^0.1.4","@shoutem/react-web-ui":"^1.0.2","@shoutem/redux-api-sdk":"2.0.4","@shoutem/redux-composers":"^0.1.6","@shoutem/redux-io":"^3.2.5","@shoutem/redux-sync-state-engine":"^0.0.2","auto-bind":"^4.0.0","classnames":"^2.2.6","es6-promise":"^4.1.1","fetch-everywhere":"^1.0.5","i18next":"^19.7.0","lodash":"^4.17.4","moment":"^2.16.0","react":"^16.12.0","react-dom":"^16.12.0","react-dropzone":"^4.2.1","react-redux":"^7.1.3","react-select":"^1.0.0-rc.5","redux":"^4.0.5","redux-form":"^5.2.5","redux-thunk":"~2.2.0","reselect":"^2.5.4","urijs":"^1.19.2","prop-types":"^15.7.2","react-i18next":"^11.7.3"},"babel":{"presets":["@babel/preset-env","@babel/preset-react"],"plugins":["@babel/plugin-transform-runtime","@babel/plugin-proposal-class-properties","@babel/plugin-transform-modules-commonjs"]}}')},1418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return r.ChimeUploader}}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return a.NotificationSettings}});var a=n(771),r=n(1435)},1419:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeFilePreview",{enumerable:!0,get:function(){return r.default}});var r=a(n(1420))},1420:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=a(n(57)),o=a(n(1)),l=n(18),u=a(n(0)),i=n(1424),c=n(37);function s(e){var t=e.url,n=e.soundName,a=e.onDelete,u=(0,i.useAudioPlay)(t),s=(0,r.default)(u,2),d=s[0],f=s[1],p=d?"pause":"play";return o.default.createElement("div",{className:"chime-file-preview"},o.default.createElement(l.FormControl,{readOnly:!0,value:n}),o.default.createElement("div",{className:"chime-file-preview__play-pause"},o.default.createElement(c.FontIcon,{name:p,size:"24px",onClick:f})),o.default.createElement(l.Button,{bsSize:"small",onClick:a},o.default.createElement(c.FontIcon,{name:"delete",size:"24px"})))}n(1426),s.propTypes={url:u.default.string,soundName:u.default.string,onDelete:u.default.func}},1424:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAudioPlay",{enumerable:!0,get:function(){return r.default}});var r=a(n(1425))},1425:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useState)(new Audio(e)),n=(0,r.default)(t,1)[0],a=(0,o.useState)(!1),l=(0,r.default)(a,2),u=l[0],i=l[1];return(0,o.useEffect)((function(){return n.addEventListener("ended",(function(){return i(!1)})),function(){n.removeEventListener("ended",(function(){return i(!1)}))}}),[]),(0,o.useEffect)((function(){u?n.play():n.pause()}),[u]),[u,function(){i(!u)}]};var r=a(n(57)),o=n(1)},1426:function(e,t,n){},1427:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploadInput",{enumerable:!0,get:function(){return r.default}});var r=a(n(1428))},1428:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=a(n(1)),o=n(18),l=a(n(27)),u=a(n(0)),i=a(n(1429));function c(e){var t=e.onClick;return r.default.createElement("div",{className:"chime-upload-input",onClick:t},r.default.createElement(o.FormControl,{readOnly:!0}),r.default.createElement(o.Button,{bsSize:"large"},l.default.t(i.default.BUTTON_BROWSE)))}n(1430),c.propTypes={onClick:u.default.func.isRequired}},1429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("chime-upload-input",".button-browse");t.default={BUTTON_BROWSE:a}},1430:function(e,t,n){},1431:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return r.default}});var r=a(n(1432))},1432:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=a(n(1)),o=n(18),l=a(n(27)),u=(a(n(20)),a(n(0))),i=n(37),c=a(n(1433));function s(e){var t=e.onReminderMessageChange,n=e.onScheduledNotificationsToggle,a=e.onToggleReminder,u=e.reminder,s=e.scheduledNotificationsEnabled,d=[{value:!0,label:l.default.t(c.default.ENABLED_LABEL)},{value:!1,label:l.default.t(c.default.DISABLED_LABEL)}],f=[{value:!0,label:l.default.t(c.default.ENABLED_LABEL)},{value:!1,label:l.default.t(c.default.DISABLED_LABEL)}];return r.default.createElement(r.default.Fragment,null,r.default.createElement("h3",null,l.default.t(c.default.PN_SETTINGS_TITLE)),r.default.createElement(o.FormGroup,null,r.default.createElement(o.ControlLabel,null,l.default.t(c.default.REMINDER_LABEL)),r.default.createElement(i.RadioSelector,{className:"notification-settings__radio-selector",groupName:"reminder",options:d,activeValue:u.enabled,onSelect:a})),r.default.createElement(o.FormGroup,{className:"notification-settings__form-message-margin"},r.default.createElement(o.ControlLabel,null,l.default.t(c.default.REMINDER_MESSAGE_LABEL)),r.default.createElement(o.FormControl,{disabled:!u.enabled,onChange:t,value:u.message})),r.default.createElement(o.FormGroup,null,r.default.createElement(o.ControlLabel,null,l.default.t(c.default.SCHEDULED_NOTIFICATIONS_LABEL)),r.default.createElement(i.RadioSelector,{className:"notification-settings__radio-selector",groupName:"scheduled-notifications",options:f,activeValue:s,onSelect:n})))}n(1434),s.propTypes={onReminderMessageChange:u.default.func,onScheduledNotificationsToggle:u.default.func,onToggleReminder:u.default.func,reminder:u.default.object,scheduledNotificationsEnabled:u.default.bool}},1433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notification-settings",r="".concat(a,".disabled-label"),o="".concat(a,".enabled-label"),l="".concat(a,".reminder-label"),u="".concat(a,".pn-settings-title"),i="".concat(a,".reminder-message-label"),c="".concat(a,".scheduled-notifications-label");t.default={DISABLED_LABEL:r,ENABLED_LABEL:o,PN_SETTINGS_TITLE:u,REMINDER_LABEL:l,REMINDER_MESSAGE_LABEL:i,SCHEDULED_NOTIFICATIONS_LABEL:c}},1434:function(e,t,n){},1435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return a.ChimeUploader}});var a=n(1436)},1436:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return r.default}});var r=a(n(1437))},1437:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=a(n(1632)),m=a(n(19)),v=a(n(27)),E=a(n(20)),g=a(n(0)),b=a(n(34)),h=n(772),y=n(37),_=n(771),O=a(n(1480));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function N(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}n(1481);var T=(0,b.default)();(t.default=function(e){function t(e){var n;(0,o.default)(this,t),n=N(this,t,[e]),(0,m.default)((0,c.default)(n));var a=e.appId,r=e.appsUrl;return n.assetManager=new h.AssetManager({scopeType:"application",scopeId:a,assetPolicyHost:r}),n.dropzoneRef=(0,d.createRef)(),n.state={inProgress:!1,error:null},n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){this.dropzoneRef=null}},{key:"handleFilesSelected",value:function(e){var t=this,n=E.default.head(e);if(n){var a=n.name.split(".");!function(e){return/^[a-z][a-z0-9_]*$/.test(e)}(E.default.head(a).toLowerCase())||a.length>2?this.setState({error:v.default.t(O.default.ERROR_INVALID_FILE_NAME)}):(this.setState({inProgress:!0,error:null}),this.upload(n).then((function(e){return t.handleUploadSucceeded(e.fileUrl,e.fileName)})).catch(this.handleUploadFailed))}}},{key:"upload",value:function(e){var t=this;return new Promise((function(n,a){var r=t.validateFileSize(e);return r?a(r):t.uploadFile(e).then((function(e){n(e)})).catch((function(e){return t.handleUploadFailed(e.message)}))}))}},{key:"validateFileSize",value:function(e){if(e.size>5e5){return v.default.t(O.default.ERROR_MAX_SIZE,{size:.5})}return null}},{key:"uploadFile",value:function(e){var t=this;return new Promise((function(n,a){var r,o,l,u,i=(r=e,o=(new Date).getTime(),l=E.default.head(r.name.split(".")),u=E.default.last(r.name.split(".")),"".concat(l.toLowerCase(),"_").concat(o,".").concat(u)),c="".concat(T,"/chime/").concat(i);return t.assetManager.uploadFile(c,e).then((function(e){n({fileUrl:e,fileName:i})})).catch((function(){return a(v.default.t(O.default.ERROR_UPLOAD_FAIL))}))}))}},{key:"handleUploadSucceeded",value:function(e,t){var n=this.props.onUploadSuccess;this.setState({inProgress:!1}),n({fileName:t,fileUrl:e},!0)}},{key:"handleUploadFailed",value:function(e){this.setState({error:e,inProgress:!1})}},{key:"handleDelete",value:function(){var e=this.props.onDelete;this.setState({error:null}),e(!0)}},{key:"handleOpenFilePicker",value:function(){this.dropzoneRef.current.open()}},{key:"render",value:function(){var e=this.props.chime,t=this.state,n=t.error,a=t.inProgress;return d.default.createElement(d.default.Fragment,null,d.default.createElement("h3",null,v.default.t(O.default.SETTINGS_TITLE)),d.default.createElement(f.Alert,{className:"publish-alert"},v.default.t(O.default.CHIME_ALERT)),d.default.createElement(f.FormGroup,null,d.default.createElement(f.ControlLabel,null,v.default.t(O.default.SOUND_LABEL)),d.default.createElement(y.LoaderContainer,{isLoading:a},d.default.createElement(p.default,{accept:"audio/mpeg",className:"file-uploader__dropzone",maxSize:5e5,onDrop:this.handleFilesSelected,ref:this.dropzoneRef}),!e.fileName&&d.default.createElement(_.ChimeUploadInput,{onClick:this.handleOpenFilePicker}),!!e.fileName&&d.default.createElement(_.ChimeFilePreview,{onDelete:this.handleDelete,soundName:e.fileName,url:e.fileUrl}),n&&d.default.createElement("div",{className:"text-error"},n))))}}]),t}(d.PureComponent)).propTypes={appsUrl:g.default.string,appId:g.default.string,chime:g.default.object,onDelete:g.default.func,onUploadSuccess:g.default.func}},1461:function(e,t){},1463:function(e,t){},1480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="chime-uploader-fragment",r="".concat(a,".chime-alert"),o="".concat(a,".error-file-reject"),l="".concat(a,".error-invalid-file-name"),u="".concat(a,".error-max-size"),i="".concat(a,".error-upload-fail"),c="".concat(a,".settings-title"),s="".concat(a,".sound-title");t.default={CHIME_ALERT:r,ERROR_FILE_REJECT:o,ERROR_INVALID_FILE_NAME:l,ERROR_MAX_SIZE:u,ERROR_UPLOAD_FAIL:i,SETTINGS_TITLE:c,SOUND_LABEL:s}},1481:function(e,t,n){},1528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getApplicationStatus",{enumerable:!0,get:function(){return o.getApplicationStatus}}),Object.defineProperty(t,"loadApplicationStatus",{enumerable:!0,get:function(){return a.loadApplicationStatus}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return r.reducer}});var a=n(1529),r=n(1532),o=n(1533)},1529:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.loadApplicationStatus=function(e){var t={schema:u.APPLICATION_STATUS,request:{endpoint:o.shoutemUrls.appsApi("v1/apps/".concat(e,"/status")),headers:{Accept:"application/vnd.api+json"}}};return(0,l.find)(t,(0,r.default)("status"))};var r=a(n(34)),o=n(64),l=n(24),u=n(205)},1530:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),o=a(n(9)),l=a(n(441)),u=a(n(20)),i=a(n(51));t.default=function(){function e(){(0,r.default)(this,e),(0,l.default)(this),this.legacyHost=null,this.authHost=null}return(0,o.default)(e,[{key:"init",value:function(e){var t=u.default.get(e,"pageContext.url",{}),n=t.legacy,a=t.apps,r=t.extensions;this.legacyHost=new i.default(n).host(),this.appsHost=new i.default(a).host(),this.extensionsHost=new i.default(r).host()}},{key:"legacyApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.legacyHost).toString()}},{key:"appsApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.appsHost).toString()}},{key:"extensionsApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.extensionsHost).toString()}}]),e}()},1531:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.buildShortcutTree=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.default.reduce(t,(function(t,a){if(t.push({shortcut:a,level:n}),a.children){var o=e(a.children,n+1);return r.default.concat(t,o)}return t}),[])},t.createOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(r.default.isEmpty(e))return[];return r.default.reduce(e,(function(e,o){var l=r.default.toString(r.default.get(o,t)),u=r.default.get(o,n);if(l&&u){var i={value:l,label:u};r.default.forEach(a,(function(e){var t=r.default.get(o,e);r.default.set(i,e,t)})),e.push(i)}return e}),[])};var r=a(n(20))},1532:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var r=a(n(15)),o=n(39),l=a(n(34)),u=n(24),i=n(205);t.reducer=(0,o.combineReducers)((0,r.default)((0,r.default)({},i.APPLICATION_STATUS,(0,u.storage)(i.APPLICATION_STATUS)),"applicationStatus",(0,u.one)(i.APPLICATION_STATUS,(0,l.default)("status"))))},1533:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationStatus=function(e){var t=function(e){return e[(0,r.default)()][l.moduleName]}(e);return(0,o.getOne)(t.applicationStatus,e)};var r=a(n(34)),o=n(24),l=n(205)},1534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPublished",{enumerable:!0,get:function(){return a.isPublished}});var a=n(1535)},1535:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.isPublished=function(e){return"published"===(function(e){if(r.default.isObject(e))return r.default.get(e,"publish.status");return null}(e)||e)};var r=a(n(20))},1536:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=function(e,t){return function(n){var a={schema:i.GROUPS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group")),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(t)}};return n((0,u.find)(a,(0,o.default)("groupsPage-create"))).then((function(){n((0,u.invalidate)(i.GROUPS))}))}},t.deleteGroup=function(e,t){return function(n){var a={schema:i.GROUPS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group/").concat(t)),method:"DELETE",headers:{Accept:"application/vnd.api+json"}}};return n((0,u.find)(a,(0,o.default)("groupsPage-delete"))).then((function(){n((0,u.invalidate)(i.GROUPS))}))}},t.loadGroups=function(e){var t={schema:i.GROUPS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group")),headers:{Accept:"application/vnd.api+json"}}};return(0,u.find)(t,(0,o.default)("groupsPage"))},t.updateGroup=function(e,t,n){return function(a){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t},n),d={schema:i.GROUPS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group/").concat(t)),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(s)}};return a((0,u.find)(d,(0,o.default)("groupsPage-update"))).then((function(){a((0,u.invalidate)(i.GROUPS))}))}};var r=a(n(15)),o=a(n(34)),l=n(64),u=n(24),i=n(207);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}},1537:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var r=a(n(15)),o=n(39),l=a(n(34)),u=n(24),i=n(207);t.reducer=(0,o.combineReducers)((0,r.default)((0,r.default)((0,r.default)({},i.GROUPS,(0,u.storage)(i.GROUPS)),"groups",(0,u.collection)(i.GROUPS,(0,l.default)("groupsPage"))),"rawGroups",(0,u.resource)(i.GROUPS)))},1538:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getGroups=function(e){var t=u(e).groups;return(0,o.getCollection)(t,e)},t.getRawGroups=function(e){return u(e).rawGroups};var r=a(n(34)),o=n(24),l=n(207);function u(e){return e[(0,r.default)()][l.moduleName]}},1539:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupForm",{enumerable:!0,get:function(){return r.default}});var r=a(n(1540))},1540:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=a(n(19)),m=a(n(27)),v=a(n(0)),E=n(320),g=a(n(34)),b=n(202),h=n(37),y=n(1541),_=a(n(1544));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function j(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}n(1545);var N=function(e){function t(e){var n;return(0,o.default)(this,t),n=j(this,t,[e]),(0,p.default)((0,c.default)(n)),n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleImageUploadSuccess",value:function(e){var t=this.props,n=t.fields.imageUrl,a=t.touch;n.onChange(e),a(["imageUrl"])}},{key:"handleImageDeleteSuccess",value:function(){var e=this.props,t=e.fields.imageUrl,n=e.touch;t.onChange(""),n(["imageUrl"])}},{key:"resolveFilename",value:function(e){var t=(new Date).getTime();return e.name?"".concat(t,"-").concat(e.name):"".concat(t)}},{key:"render",value:function(){var e=this.props,t=e.assetManager,n=e.submitting,a=e.invalid,r=e.fields,o=r.id,l=r.name,u=r.imageUrl,i=r.subscribeByDefault,c=e.onCancel,s=e.handleSubmit,p=e.error,v=!!o.value,E=u.touched&&u.error;return d.default.createElement("form",{className:"group-form",onSubmit:s},d.default.createElement(f.Row,null,d.default.createElement(h.ReduxFormElement,{elementId:"name",name:m.default.t(_.default.FORM_NAME_INPUT_DESCRIPTION),maxLength:255,disabled:n,field:l})),d.default.createElement(f.Row,null,d.default.createElement(f.FormGroup,{controlId:"imageUrl",validationState:E?"error":"success"},d.default.createElement(f.ControlLabel,null,m.default.t(_.default.FORM_IMAGE_LABEL)),d.default.createElement(h.ImageUploader,{onUploadSuccess:this.handleImageUploadSuccess,onDeleteSuccess:this.handleImageDeleteSuccess,resolveFilename:this.resolveFilename,src:u.value,elementId:"imageUrl",helpText:m.default.t(_.default.FORM_IMAGE_HELP_TEXT),previewSize:"custom",width:120,height:120,folderName:(0,g.default)(),assetManager:t,disabled:n,preview:u.value,field:u}),d.default.createElement("div",{className:"has-error image-error"},E&&d.default.createElement(f.HelpBlock,null,u.error)))),d.default.createElement(f.Row,{className:"switch"},d.default.createElement(h.ReduxFormElement,{disabled:n,elementId:"subscribeByDefault",field:i,name:m.default.t(_.default.SUBSCRIBE_TOGGLE_TEXT)},d.default.createElement(h.Switch,null))),d.default.createElement(f.ButtonToolbar,null,d.default.createElement(f.Button,{bsSize:"large",bsStyle:"primary",disabled:n||a,type:"submit"},d.default.createElement(h.LoaderContainer,{isLoading:n},v?m.default.t(_.default.BUTTON_SAVE):m.default.t(_.default.BUTTON_ADD))),d.default.createElement(f.Button,{bsSize:"large",disabled:n,onClick:c},m.default.t(_.default.BUTTON_CANCEL))),p&&d.default.createElement("div",{className:"has-error"},d.default.createElement(f.HelpBlock,null,p)))}}]),t}(d.Component);N.propTypes={assetManager:v.default.object,handleSubmit:v.default.func,submitting:v.default.bool,invalid:v.default.bool,fields:v.default.object,onCancel:v.default.func,touch:v.default.func,error:v.default.string};t.default=(0,E.reduxForm)({getFormState:b.getFormState,form:"groupForm",fields:["id","name","imageUrl","subscribeByDefault"],validate:y.validateGroup})(N)},1541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"validateGroup",{enumerable:!0,get:function(){return a.validateGroup}});var a=n(1542)},1542:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.validateGroup=function(e){var t=e.name,n=e.imageUrl;return{name:l(t),imageUrl:l(n)}};var r=a(n(27)),o=a(n(1543));function l(e){return e?null:r.default.t(o.default.VALUE_REQUIRED_TEXT)}},1543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("groups-services",".value-required-text");t.default={VALUE_REQUIRED_TEXT:a}},1544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="group-form",r="".concat(a,".name-input-label"),o="".concat(a,".image-picker-label"),l="".concat(a,".image-help-text"),u="".concat(a,".subscribe-toggle-text"),i="".concat(a,".button-save"),c="".concat(a,".button-add"),s="".concat(a,".button-cancel");t.default={FORM_NAME_INPUT_DESCRIPTION:r,FORM_IMAGE_LABEL:o,FORM_IMAGE_HELP_TEXT:l,SUBSCRIBE_TOGGLE_TEXT:u,BUTTON_SAVE:i,BUTTON_ADD:c,BUTTON_CANCEL:s}},1545:function(e,t,n){},1546:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupNode",{enumerable:!0,get:function(){return r.default}});var r=a(n(1547))},1547:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=a(n(19)),m=a(n(20)),v=a(n(0)),E=n(37);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}n(1548),(t.default=function(e){function t(e){var n;return(0,o.default)(this,t),n=b(this,t,[e]),(0,p.default)((0,c.default)(n)),n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleEditClick",value:function(){var e=this.props,t=e.id,n=e.onEditClick;m.default.isFunction(n)&&n(t)}},{key:"handlDeleteClick",value:function(){var e=this.props,t=e.id,n=e.onDeleteClick;m.default.isFunction(n)&&n(t)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,a=e.imageUrl;return d.default.createElement("div",{key:t,className:"group-node"},d.default.createElement("div",{className:"group-image-container"},d.default.createElement("img",{className:"group-image",alt:"group",src:a})),d.default.createElement("div",{className:"group-name"},n),d.default.createElement("div",{className:"group-actions"},d.default.createElement(f.Button,{className:"btn-icon",onClick:this.handleEditClick},d.default.createElement(E.FontIcon,{name:"edit",size:"24px"})),d.default.createElement(f.Button,{className:"btn-icon",onClick:this.handlDeleteClick},d.default.createElement(E.FontIcon,{name:"delete",size:"24px"}))))}}]),t}(d.Component)).propTypes={id:v.default.string,name:v.default.string,imageUrl:v.default.string,onEditClick:v.default.func,onDeleteClick:v.default.func}},1548:function(e,t,n){},1549:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return r.default}});var r=a(n(1550))},1550:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(23)),l=a(n(28)),u=a(n(8)),i=a(n(9)),c=a(n(11)),s=a(n(12)),d=a(n(6)),f=a(n(10)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),m=a(n(19)),v=a(n(27)),E=a(n(20)),g=a(n(0)),b=n(64),h=n(37),y=a(n(1551)),_=["emptyText","selectedGroupIds","disabled","onSelectionChanged","showSelectNoneOption"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function j(e,t,n){return t=(0,s.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}var N=t.default=function(e){function t(e){var n;return(0,u.default)(this,t),n=j(this,t,[e]),(0,m.default)((0,d.default)(n)),n.state={groupOptions:null},n}return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.groups,a=e.labelLengthLimit,r=e.groups;if(n!==r){var o=(0,b.createOptions)(r),l=E.default.map(o,(function(e){return{value:e.value,label:E.default.truncate(e.label,{length:a})}}));this.setState({groupOptions:l})}}},{key:"render",value:function(){var e=this.state.groupOptions,t=this.props,n=t.emptyText,a=t.selectedGroupIds,r=t.disabled,u=t.onSelectionChanged,i=t.showSelectNoneOption,c=(0,l.default)(t,_),s=n||v.default.t(y.default.DROPDOWN_PLACEHOLDER);return p.default.createElement(h.MultiselectDropdown,(0,o.default)({disabled:r,displayLabelMaxSelectedOptions:1,emptyText:s,onSelectionChanged:u,options:e,showSelectNoneOption:i,selectedValues:a},c))}}]),t}(p.Component);N.propTypes={name:g.default.string,error:g.default.string,selectedGroupIds:g.default.array,emptyText:g.default.string,groups:g.default.array,onSelectionChanged:g.default.func,disabled:g.default.bool,showSelectNoneOption:g.default.bool,labelLengthLimit:g.default.number},N.defaultProps={labelLengthLimit:40}},1551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("groups-dropdown",".dropdown-placeholder");t.default={DROPDOWN_PLACEHOLDER:a}},1552:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Groups",{enumerable:!0,get:function(){return r.default}});var r=a(n(1553))},1553:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(142)),l=a(n(23)),u=a(n(15)),i=a(n(143)),c=a(n(8)),s=a(n(9)),d=a(n(11)),f=a(n(12)),p=a(n(6)),m=a(n(10)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),E=n(18),g=n(45),b=a(n(19)),h=a(n(27)),y=a(n(20)),_=a(n(0)),O=n(39),j=n(37),N=n(24),T=n(36),P=n(816),I=n(815),S=a(n(1554));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t=(0,f.default)(t),(0,d.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,f.default)(e).constructor):t.apply(e,n))}n(1555);var D=function(e){function t(e){var n;return(0,c.default)(this,t),n=C(this,t,[e]),(0,b.default)((0,p.default)(n)),n.confirmModal=(0,v.createRef)(),n.state={showGroupModal:!1,currentGroup:null,groups:null,tree:void 0},n}var n,a,r;return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:(r=(0,i.default)(o.default.mark((function e(t){var n,a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:{},a=t.appId,(0,N.shouldLoad)(t,n,"groups")&&this.handleLoadGroups(a);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleLoadGroups",value:(a=(0,i.default)(o.default.mark((function e(t){var n,a,r,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.loadGroups,e.next=3,n(t);case 3:a=e.sent,r=y.default.get(a,"payload.data",[]),l=y.default.map(r,(function(e){return{id:e.id,name:e.name,imageUrl:e.imageUrl,isNestable:!1,isDraggable:!0,isRoot:!1,disableDrop:!1}})),this.setState({groups:r,tree:l});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleCreateGroupClick",value:function(){this.setState({showGroupModal:!0,currentGroup:null})}},{key:"handleHide",value:function(){this.setState({showGroupModal:!1,currentGroup:null})}},{key:"handleOnSelect",value:function(){}},{key:"handleEditClick",value:function(e){var t=this.state.groups,n=y.default.find(t,{id:e});this.setState({showGroupModal:!0,currentGroup:n})}},{key:"handleDeleteClick",value:function(e){var t=this.props,n=t.appId,a=t.deleteGroup,r=this.state.groups,o=y.default.find(r,{id:e}),l=y.default.get(o,"name");this.confirmModal.current.show({title:h.default.t(S.default.DELETE_MODAL_TITLE),message:h.default.t(S.default.DELETE_MODAL_MESSAGE,{groupName:l}),confirmLabel:h.default.t(S.default.DELETE_MODAL_CONFIRM_LABEL),abortLabel:h.default.t(S.default.CONFIRM_MODAL_ABORT_LABEL),confirmBsStyle:"danger",onConfirm:function(){return a(n,e)}})}},{key:"handleFormSubmit",value:(n=(0,i.default)(o.default.mark((function e(t){var n,a,r,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.appId,r=n.createGroup,l=n.updateGroup,!(u=y.default.get(t,"id"))){e.next=6;break}return e.next=5,l(a,u,t);case 5:return e.abrupt("return",this.handleHide());case 6:return e.next=8,r(a,t);case 8:return e.abrupt("return",this.handleHide());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleOnDragAndDropComplete",value:function(e,t){var n=this.props,a=n.appId,r=n.updateGroup,o=this.state.groups;if(e&&t&&e.index!==t.index){var l=e.id;r(a,l,L(L({},y.default.find(o,{id:l})),{},{orderIndex:t.index}))}}},{key:"renderGroupNode",value:function(e){return v.default.createElement(P.GroupNode,(0,l.default)({},e,{onEditClick:this.handleEditClick,onDeleteClick:this.handleDeleteClick}))}},{key:"render",value:function(){var e=this.props,t=e.assetManager,n=e.groups,a=this.state,r=a.showGroupModal,o=a.groups,l=a.tree,u=a.currentGroup,i=!(0,T.isInitialized)(n)||(0,T.isBusy)(n),c=y.default.isEmpty(o);return v.default.createElement("div",{className:"groups"},v.default.createElement(j.LoaderContainer,{isOverlay:!0,isLoading:i},v.default.createElement("div",{className:"groups-table__title"},v.default.createElement("h3",null,h.default.t(S.default.LIST_TITLE)),v.default.createElement(E.Button,{className:"btn-icon pull-right",onClick:this.handleCreateGroupClick},v.default.createElement(j.IconLabel,{iconName:"add"},h.default.t(S.default.ADD_GROUP_LABEL)))),c&&v.default.createElement("div",{className:"groups-empty-placeholder"},h.default.t(S.default.GROUPS_EMPTY_TEXT)),v.default.createElement(j.NestedSortable,{showDragHandle:!0,className:"group-structure",tree:l,nodeHeaderTemplate:this.renderGroupNode,onSelect:this.handleOnSelect,onDragAndDropComplete:this.handleOnDragAndDropComplete}),r&&v.default.createElement(j.InlineModal,{className:"groups-page-modal",onHide:this.handleHide,title:h.default.t(S.default.ADD_GROUP_MODAL_TITLE)},v.default.createElement(P.GroupForm,{assetManager:t,initialValues:u,onCancel:this.handleHide,onSubmit:this.handleFormSubmit})),v.default.createElement(j.ConfirmModal,{className:"settings-page-modal-small",ref:this.confirmModal})))}}]),t}(v.Component);D.propTypes={appId:_.default.string,groups:_.default.array,assetManager:_.default.object,loadGroups:_.default.func,createGroup:_.default.func,updateGroup:_.default.func,deleteGroup:_.default.func};t.default=(0,g.connect)((function(e){return{groups:(0,I.getGroups)(e)}}),(function(e){return(0,O.bindActionCreators)({loadGroups:I.loadGroups,createGroup:I.createGroup,updateGroup:I.updateGroup,deleteGroup:I.deleteGroup},e)}))(D)},1554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="groups",r="".concat(a,".delete-modal-title"),o="".concat(a,".delete-modal-message"),l="".concat(a,".delete-modal-confirm-label"),u="".concat(a,".delete-modal-abort-label"),i="".concat(a,".list-title"),c="".concat(a,".add-group-label"),s="".concat(a,".groups-empty-text"),d="".concat(a,".add-group-modal-title");t.default={DELETE_MODAL_TITLE:r,DELETE_MODAL_MESSAGE:o,DELETE_MODAL_CONFIRM_LABEL:l,CONFIRM_MODAL_ABORT_LABEL:u,LIST_TITLE:i,ADD_GROUP_LABEL:c,GROUPS_EMPTY_TEXT:s,ADD_GROUP_MODAL_TITLE:d}},1555:function(e,t,n){},1556:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===o.SAVE_JOURNEY_TRIGGERS)return u(u({},e),{},{triggers:t.payload});return e};var r=a(n(15)),o=n(818);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i={triggers:[]}},1557:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getTriggers=t.getJourneys=t.getAvailableTriggers=void 0;var r=a(n(62)),o=a(n(20)),l=n(1558),u=n(52),i=a(n(34)),c=n(114);var s=t.getJourneys=(0,l.createSelector)([function(e){return(0,u.getExtension)(e,(0,i.default)())}],(function(e){return e.settings.journeys})),d=t.getTriggers=(0,l.createSelector)([function(e){return e[(0,i.default)()][c.moduleName]}],(function(e){return e.triggers}));t.getAvailableTriggers=(0,l.createSelector)([s,d,function(e,t){return t}],(function(e,t,n){if(!e)return t;var a=o.default.map(e,(function(e){return e.trigger.value})),l=o.default.filter(t,(function(e){return!o.default.includes(a,e.id)}));return n?[].concat((0,r.default)(l),[o.default.find(t,(function(e){return e.id===n}))]):l}))},1559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return a.JourneyForm}}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return r.JourneysTable}});var a=n(1560),r=n(1573)},1560:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return r.default}});var r=a(n(1561))},1561:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=P;var o=a(n(15)),l=a(n(62)),u=a(n(57)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),c=n(18),s=n(45),d=a(n(208)),f=a(n(27)),p=a(n(20)),m=a(n(0)),v=n(37),E=n(52),g=a(n(34)),b=n(1562),h=n(114),y=n(329),_=a(n(1571));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){return e!==t&&!p.default.isEmpty(e)}function P(e){var t=e.initialValues,n=e.onSubmit,a=e.isEdit,r=(0,s.useDispatch)(),o=(0,s.useSelector)((function(e){return(0,E.getExtension)(e,(0,g.default)())})),m=(0,s.useSelector)(E.getShortcuts),h=(0,s.useSelector)((function(e){var n;return(0,y.getAvailableTriggers)(e,null===(n=t.trigger)||void 0===n?void 0:n.value)})),O=(0,i.useState)(t.title),j=(0,u.default)(O,2),P=j[0],I=j[1],S=(0,i.useState)(t.trigger),R=(0,u.default)(S,2),A=R[0],L=R[1],C=(0,i.useState)(t.notifications),D=(0,u.default)(C,2),M=D[0],w=D[1],U=(0,i.useState)(!1),k=(0,u.default)(U,2),G=k[0],B=k[1],F=(0,i.useState)(!0),x=(0,u.default)(F,2),Y=x[0],V=x[1],W=(0,i.useMemo)((function(){return!!P&&!!A.value&&p.default.every(M,(function(e){return!!e.title&&!!e.body}))}),[P,A,M]),z=(0,i.useMemo)((function(){return G&&!Y&&W}),[G,Y,W]),H=(0,i.useMemo)((function(){return h.map((function(e){return{value:e.id,label:e.attributes.name}}))}),[h]);function J(e,t){var n=(0,l.default)(M);n[t]=N(N({},M[t]),e),B(T(n,M)),w(n)}function q(e){var t=(0,l.default)(M);t.splice(e,1),B(T(t,M)),w(t)}return(0,i.useEffect)((function(){r((0,E.fetchShortcuts)()).then((function(){return V(!1)}))}),[r]),i.default.createElement(v.LoaderContainer,{isLoading:Y,className:"journey-form__container"},i.default.createElement(c.FormGroup,null,i.default.createElement(c.ControlLabel,null,f.default.t(_.default.JOURNEY_TITLE)),i.default.createElement(c.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return B(T(t,P)),I(t)},value:P})),i.default.createElement(c.FormGroup,{controlId:"trigger"},i.default.createElement(c.ControlLabel,null,f.default.t(_.default.TRIGGER_LABEL)),i.default.createElement(d.default,{clearable:!1,elementId:"trigger",name:"trigger",onChange:function(e){return B(T(e,A)),L(e)},noResultsText:f.default.t(_.default.NO_AVAILABLE_TRIGGERS),options:H,value:null==A?void 0:A.value})),i.default.createElement("div",{className:"journey-form__add-new-notification"},i.default.createElement(c.Button,{className:"btn-icon pull-right",onClick:function(){w((function(e){return[].concat((0,l.default)(e),[{}])}))}},i.default.createElement(v.IconLabel,{iconName:"add"},f.default.t(_.default.ADD_NEW_NOTIFICATION)))),p.default.map(M,(function(e,t){return i.default.createElement(b.NotificationInput,{shortcuts:m,shortcutId:null==e?void 0:e.shortcutId,delay:null==e?void 0:e.delay,key:t,index:t,body:null==e?void 0:e.body,title:null==e?void 0:e.title,target:null==e?void 0:e.target,contentUrl:null==e?void 0:e.contentUrl,onValueChange:J,onDelete:q})})),i.default.createElement(c.ButtonToolbar,null,i.default.createElement(c.Button,{bsStyle:"primary",disabled:!z,onClick:function(){V(!0);var e=p.default.get(o,"settings.journeys",[]);if(t.key&&p.default.find(e,["key",t.key])){var a=p.default.findIndex(e,["key",t.key]);e[a]=N(N({},e[a]),{},{title:P,trigger:A,notifications:M,active:!0})}else e.push({title:P,id:A.value,key:"".concat(P,"-").concat(Date.now()),trigger:A,notifications:M,active:!0});return r((0,E.updateExtensionSettings)(o,N(N({},o.settings),{},{journeys:e}))).then(n).finally((function(){return V(!1)}))}},i.default.createElement(v.LoaderContainer,{isLoading:Y},f.default.t(_.default.SAVE_BUTTON)))),a&&i.default.createElement(c.HelpBlock,{className:"journey-form__warning-text"},f.default.t(_.default.UPDATE_WARNING)))}n(1572),P.propTypes={onSubmit:m.default.func.isRequired,initialValues:m.default.shape({id:m.default.string,key:m.default.string,notifications:m.default.array,title:m.default.string,trigger:m.default.shape({label:m.default.string,value:m.default.string})}),isEdit:m.default.bool},P.defaultProps={initialValues:{notifications:[h.DEFAULT_JOURNEY_NOTIFICATION],title:"",trigger:{label:"",value:""}},isEdit:!1}},1562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInput",{enumerable:!0,get:function(){return a.NotificationInput}});var a=n(1563)},1563:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInput",{enumerable:!0,get:function(){return r.default}});var r=a(n(1564))},1564:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var o=a(n(15)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),u=n(18),i=a(n(208)),c=a(n(27)),s=a(n(0)),d=n(37),f=n(819),p=n(114),m=n(1567),v=n(1569),E=a(n(820));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){var t=e.shortcuts,n=e.delay,a=e.index,r=e.body,o=e.title,s=e.target,p=e.contentUrl,g=e.shortcutId,b=e.onValueChange,h=e.onDelete,y=(0,l.useMemo)((function(){return(0,v.getTargetOptions)()}),[]),_=(0,l.useMemo)((function(){return(0,v.getDelayOptions)()}),[]),O=(0,l.useMemo)((function(){return s.value===y[1].value}),[s.value,y]),j=(0,l.useMemo)((function(){return n||_[0].value}),[n,_]),N=(0,l.useMemo)((function(){return 0!==a}),[a]);return l.default.createElement(l.default.Fragment,null,l.default.createElement("h4",{className:"notification-input__title"},c.default.t(E.default.NOTIFICATION_INPUT_TITLE,{index:a+1})),N&&l.default.createElement("div",{className:"notification-input__delete"},l.default.createElement(u.Button,{className:"btn-icon pull-right",onClick:function(e){e.stopPropagation(),h(a)}},l.default.createElement(d.FontIcon,{name:"delete",size:"24px"}))),l.default.createElement(u.FormGroup,null,l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_DELAY_LABEL)),l.default.createElement(i.default,{clearable:!1,name:"delay",onChange:function(e){return b({delay:e.value},a)},options:_,value:j})),l.default.createElement(u.FormGroup,null,l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_TITLE_LABEL)),l.default.createElement(u.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return b({title:t},a)},value:o})),l.default.createElement(u.FormGroup,null,l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_BODY_LABEL)),l.default.createElement(u.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return b({body:t},a)},value:r})),l.default.createElement(u.Row,null,l.default.createElement(u.Col,{xs:5},l.default.createElement(u.FormGroup,{controlId:"target"},l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_TARGET_LABEL)),l.default.createElement(i.default,{clearable:!1,elementId:"target",name:"target",onChange:function(e){if(e===y[0]&&p){var t=(0,m.getNotificationAction)({target:y[0].value,contentUrl:p,title:o});return b({target:e,action:t},a)}if(e===y[1]&&g){var n=(0,m.getNotificationAction)({target:y[1].value,shortcutId:g});return b({target:e,action:n},a)}return b({target:e,action:""},a)},options:y,value:null==s?void 0:s.value}))),l.default.createElement(u.Col,{xs:7},l.default.createElement(u.FormGroup,null,!O&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_CONTENT_URL_LABEL)),l.default.createElement(u.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value,n=(0,m.getNotificationAction)({target:y[0].value,contentUrl:t,title:o});return b({target:y[0],contentUrl:t,action:n},a)},value:p})),O&&l.default.createElement(l.default.Fragment,null,l.default.createElement(u.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_CONTENT_SHORTCUT_LABEL)),l.default.createElement(f.ShortcutsDropdown,{shortcuts:t,shortcut:g,onChange:function(e){var t=(0,m.getNotificationAction)({target:y[1].value,shortcutId:e});return b({target:y[1],shortcutId:e,action:t},a)}}))))))}n(1570),h.propTypes={index:s.default.number.isRequired,shortcuts:s.default.array.isRequired,onDelete:s.default.func.isRequired,onValueChange:s.default.func.isRequired,body:s.default.string,contentUrl:s.default.string,delay:s.default.number,shortcutId:s.default.string,target:s.default.object,title:s.default.string},h.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p.DEFAULT_JOURNEY_NOTIFICATION)},1565:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(23)),l=a(n(28)),u=a(n(8)),i=a(n(9)),c=a(n(11)),s=a(n(12)),d=a(n(6)),f=a(n(10)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),m=a(n(208)),v=a(n(19)),E=a(n(27)),g=a(n(20)),b=a(n(0)),h=n(64),y=a(n(1566)),_=["shortcut"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function j(e,t,n){return t=(0,s.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}(t.default=function(e){function t(e){var n;return(0,u.default)(this,t),n=j(this,t,[e]),(0,v.default)((0,d.default)(n)),n.state={shortcutOptions:null},n}return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shortcuts,a=e.shortcuts;if(n!==a){var r=(0,h.buildShortcutTree)(a),o=(0,h.createOptions)(r,"shortcut.key","shortcut.title",["level"]);this.setState({shortcutOptions:o})}}},{key:"handleBlur",value:function(){var e=this.props,t=e.onBlur,n=e.shortcut;g.default.isFunction(t)&&t(n)}},{key:"handleOnChange",value:function(e){var t=this.props.onChange,n=g.default.get(e,"value");g.default.isFunction(t)&&t(n)}},{key:"renderOption",value:function(e){var t=20*e.level+8,n={paddingLeft:"".concat(t,"px")};return p.default.createElement("span",{style:n},e.label)}},{key:"render",value:function(){var e=this.props,t=e.shortcut,n=(0,l.default)(e,_),a=this.state.shortcutOptions;return p.default.createElement(m.default,(0,o.default)({},n,{name:"shortcut",clearable:!1,placeholder:E.default.t(y.default.DROPDOWN_PLACEHOLDER),value:t,options:a,onBlur:this.handleBlur,onChange:this.handleOnChange,optionRenderer:this.renderOption}))}}]),t}(p.Component)).propTypes={shortcut:b.default.string,shortcuts:b.default.array,onChange:b.default.func,onBlur:b.default.func}},1566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("shortcuts-dropdown",".dropdown-placeholder");t.default={DROPDOWN_PLACEHOLDER:a}},1567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNotificationAction",{enumerable:!0,get:function(){return a.getNotificationAction}});var a=n(1568)},1568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotificationAction=function(e){if(e.target===a.TARGET_VALUES.URL){var t={route:{key:"push-".concat((new Date).getTime().toString()),screen:"shoutem.web-view.WebViewScreen",props:{url:e.contentUrl,title:e.title,showNavigationToolbar:!0}},type:r};return JSON.stringify(t)}if(e.target===a.TARGET_VALUES.SCREEN){var n={type:o,navigationAction:"shoutem.navigation.OPEN_MODAL",shortcutId:e.shortcutId};return JSON.stringify(n)}return null};var a=n(114),r="shoutem.navigation.OPEN_MODAL",o="shoutem.application.EXECUTE_SHORTCUT"},1569:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getDelayOptions=function(){return[{label:"1 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_MINUTE_LABEL)),value:1},{label:"5 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:5},{label:"15 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:15},{label:"30 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:30},{label:"1 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_HOUR_LABEL)),value:60},{label:"1 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_DAY_LABEL)),value:1440},{label:"7 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_DAYS_LABEL)),value:10080},{label:"30 ".concat(r.default.t(l.default.NOTIFICATION_INPUT_DAYS_LABEL)),value:43200}]},t.getTargetOptions=function(){return[{value:o.TARGET_VALUES.URL,label:r.default.t(l.default.NOTIFICATION_INPUT_TARGET_URL)},{value:o.TARGET_VALUES.SCREEN,label:r.default.t(l.default.NOTIFICATION_INPUT_TARGET_SCREEN)}]};var r=a(n(27)),o=n(114),l=a(n(820))},1570:function(e,t,n){},1571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_NEW_NOTIFICATION:"journey-form-add-new-notification",FIELD_REQUIRED:"journey-form-field-required",JOURNEY_TITLE:"journey-form-title-label",SAVE_BUTTON:"journey-form-save",TRIGGER_LABEL:"journey-form-trigger-label",UPDATE_WARNING:"journey-form-update-warning",NO_AVAILABLE_TRIGGERS:"journey-form-no-available-triggers"}},1572:function(e,t,n){},1573:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return r.default}});var r=a(n(1574))},1574:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var o=a(n(15)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),u=n(18),i=n(45),c=a(n(27)),s=a(n(20)),d=a(n(0)),f=n(37),p=n(52),m=a(n(34)),v=n(329),E=a(n(1575));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=e.onAddClick,n=e.onEditClick,a=e.onRowClick,r=(0,i.useDispatch)(),o=(0,i.useSelector)((function(e){return(0,p.getExtension)(e,(0,m.default)())})),d=(0,i.useSelector)(v.getJourneys);function g(e){return s.default.get(e,"active",!1)?l.default.createElement(u.Button,{className:"btn-icon pull-right",onClick:function(){return n(e)}},l.default.createElement(f.FontIcon,{name:"edit",size:"24px"})):null}var b=(0,l.useCallback)((function(e){var t=s.default.filter(o.settings.journeys,(function(t){return t.id!==e.id}));r((0,p.updateExtensionSettings)(o,h(h({},o.settings),{},{journeys:t})))}),[r,o]);function y(e){return l.default.createElement(u.Button,{className:"btn-icon pull-right",onClick:function(t){t.stopPropagation(),b(e)}},l.default.createElement(f.FontIcon,{name:"delete",size:"24px"}))}return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"journeys-table__title-row"},l.default.createElement("h3",null,c.default.t(E.default.JOURNEYS_TITLE)),l.default.createElement(u.Button,{className:"btn-icon pull-right",onClick:t},l.default.createElement(f.IconLabel,{iconName:"add"},c.default.t(E.default.ADD_NEW_JOURNEY)))),l.default.createElement(f.EditableTable,{isStatic:!0,canUpdate:!1,canDelete:!1,className:"journeys-table",emptyStateText:c.default.t(E.default.NO_JOURNEYS_TEXT),headers:[c.default.t(E.default.TABLE_TITLE),"",""],rowDescriptors:[{property:"title",isRequired:!0},{getDisplayValue:g,isRequired:!1},{getDisplayValue:y,isRequired:!1}],rows:d,onRowClick:a}))}n(1576),y.propTypes={onAddClick:d.default.func.isRequired,onEditClick:d.default.func.isRequired,onRowClick:d.default.func.isRequired}},1575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_NEW_JOURNEY:"journeys-table-add-new",JOURNEYS_TITLE:"journeys-title",NO_JOURNEYS_TEXT:"journeys-table-no-journeys-placeholder",TABLE_TITLE:"journeys-table-title"}},1576:function(e,t,n){},1577:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=function(e,t){return function(n){var a={schema:i.NOTIFICATIONS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification")),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(t)}};return n((0,u.find)(a,(0,o.default)("notificationsPage-create"))).then((function(){n((0,u.invalidate)(i.NOTIFICATIONS))}))}},t.deleteNotification=function(e,t){return function(n){var a={schema:i.NOTIFICATIONS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification/").concat(t)),method:"DELETE",headers:{Accept:"application/vnd.api+json"}}};return n((0,u.find)(a,(0,o.default)("notificationsPage-delete"))).then((function(){n((0,u.invalidate)(i.NOTIFICATIONS))}))}},t.loadNotifications=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a={q:{limit:n,offset:t,type:"Manual"}},r={schema:i.NOTIFICATIONS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification{?q*}")),headers:{Accept:"application/vnd.api+json"}}};return(0,u.find)(r,(0,o.default)("notificationsPage"),a)},t.updateNotification=function(e,t,n){return function(a){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t},n),d={schema:i.NOTIFICATIONS,request:{endpoint:l.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification/").concat(t)),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(s)}};return a((0,u.find)(d,(0,o.default)("notificationsPage-update"))).then((function(){a((0,u.invalidate)(i.NOTIFICATIONS))}))}};var r=a(n(15)),o=a(n(34)),l=n(64),u=n(24),i=n(56);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}},1578:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var r=a(n(15)),o=n(39),l=a(n(34)),u=n(24),i=n(56);t.reducer=(0,o.combineReducers)((0,r.default)((0,r.default)((0,r.default)({},i.NOTIFICATIONS,(0,u.storage)(i.NOTIFICATIONS)),"notifications",(0,u.collection)(i.NOTIFICATIONS,(0,l.default)("notificationsPage"))),"rawNotifications",(0,u.resource)(i.NOTIFICATIONS)))},1579:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getNotifications=function(e){var t=u(e).notifications;return(0,o.getCollection)(t,e)},t.getRawNotifications=function(e){return u(e).rawNotifications};var r=a(n(34)),o=n(24),l=n(56);function u(e){return e[(0,r.default)()][l.moduleName]}},1580:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return r.default}});var r=a(n(1581))},1581:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(142)),l=a(n(143)),u=a(n(8)),i=a(n(9)),c=a(n(11)),s=a(n(12)),d=a(n(6)),f=a(n(10)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),m=n(45),v=a(n(19)),E=a(n(27)),g=a(n(20)),b=a(n(0)),h=n(39),y=n(18),_=n(37),O=n(52),j=n(24),N=n(36),T=n(206),P=n(1582),I=n(56),S=n(822),R=n(823),A=a(n(1601));function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}function C(e,t,n){return t=(0,s.default)(t),(0,c.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}n(1602);var D={target:I.TARGET_TYPES.APP,audience:I.AUDIENCE_TYPES.ALL,delivery:I.DELIVERY_TYPES.NOW,recurringPeriod:I.RECURRING_PERIOD_TYPES.NONE,summaries:[]},M=function(e){function t(e){var n;return(0,u.default)(this,t),n=C(this,t,[e]),(0,v.default)((0,d.default)(n)),n.confirmModal=(0,p.createRef)(),n.state={showNotificationModal:!1,showNotificationInfoModal:!1,currentNotification:null},n}var n;return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.appId,a=e.fetchShortcuts,r=e.fetchModules,o=e.loadGroups;(0,j.shouldLoad)(e,t,"notifications")&&(this.handleLoadNotifications(n,0),o(n)),(0,j.shouldLoad)(e,t,"groups")&&o(n),(0,j.shouldLoad)(e,t,"shortcuts")&&a(),(0,j.shouldLoad)(e,t,"modules")&&r()}},{key:"handleLoadNotifications",value:function(e,t,n){return(0,this.props.loadNotifications)(e,t,n)}},{key:"handleCreateNotificationClick",value:function(){var e=this.props.onModalShown;this.setState({currentNotification:null,showNotificationModal:!0,showNotificationInfoModal:!1}),e(!0)}},{key:"handleHideNotificationModal",value:function(){var e=this.props.onModalShown;this.setState({currentNotification:null,showNotificationModal:!1,showNotificationInfoModal:!1}),e(!1)}},{key:"handleHideNotificationInfoModal",value:function(){this.setState({currentNotification:null,showNotificationModal:!1,showNotificationInfoModal:!1})}},{key:"handleNextPageClick",value:function(){var e=this.props,t=e.appId,n=e.notifications,a=e.rawNotifications;if(!(0,N.isBusy)(n)){var r=g.default.get(a,"paging.pageLimit"),o=g.default.get(a,"paging.page",0)*r+r;this.handleLoadNotifications(t,o)}}},{key:"handlePreviousPageClick",value:function(){var e=this.props,t=e.appId,n=e.notifications,a=e.rawNotifications;if(!(0,N.isBusy)(n)){var r=g.default.get(a,"paging.pageLimit"),o=g.default.get(a,"paging.page",0)*r-r;this.handleLoadNotifications(t,o)}}},{key:"handleEditClick",value:function(e){var t=this.props.onModalShown,n=(0,R.mapModelToView)(e);this.setState({currentNotification:n,showNotificationModal:!0}),t(!0)}},{key:"handleInfoClick",value:function(e){var t=this.props.onModalShown,n=(0,R.mapModelToView)(e);this.setState({currentNotification:n,showNotificationInfoModal:!0}),t(!0)}},{key:"handleDeleteClick",value:function(e){var t=this.props,n=t.appId,a=t.deleteNotification,r=g.default.get(e,"id");this.confirmModal.current.show({title:E.default.t(A.default.CONFIRM_MODAL_TITLE),message:E.default.t(A.default.CONFIRM_MODAL_MESSAGE),confirmLabel:E.default.t(A.default.CONFIRM_MODAL_CONFIRM_LABEL),abortLabel:E.default.t(A.default.CONFIRM_MODAL_ABORT_LABEL),confirmBsStyle:"danger",onConfirm:function(){return a(n,r)}})}},{key:"handleRowClick",value:function(e){return g.default.get(e,"active")?this.handleEditClick(e):this.handleInfoClick(e)}},{key:"handleShowAlert",value:function(e){var t=this.props.showAlert;g.default.get(e,"delivery")!==I.DELIVERY_TYPES.SCHEDULED?t(E.default.t(A.default.ALERT_SENT_TEXT)):t(E.default.t(A.default.ALERT_SCHEDULED_TEXT))}},{key:"handleFormSubmit",value:(n=(0,l.default)(o.default.mark((function e(t){var n,a,r,l,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.appId,r=n.createNotification,l=n.updateNotification,u=g.default.get(t,"id"),i=(0,R.mapViewToModel)(t),!u){e.next=8;break}return e.next=6,l(a,u,i);case 6:return this.handleShowAlert(t),e.abrupt("return",this.handleHideNotificationModal());case 8:return e.next=10,r(a,i);case 10:return this.handleShowAlert(t),e.abrupt("return",this.handleHideNotificationModal());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleToggleRecurringFeature",value:function(){var e=this.props.modules,t=g.default.find(e,{name:I.RECURRING_FEATURE});return t?this.props.removeModule(t):this.props.createModule({name:I.RECURRING_FEATURE})}},{key:"resolveHasNext",value:function(){var e=this.props.rawNotifications,t=g.default.get(e,"paging.pageLimit");return g.default.get(e,"data",[]).length>=t}},{key:"resolveHasPrev",value:function(){var e=this.props.rawNotifications;return g.default.get(e,"paging.page",0)>0}},{key:"resolveCurrentNotification",value:function(){var e=this.state.currentNotification;if("Silent"===(null==e?void 0:e.type)){var t=g.default.cloneDeep(e);return g.default.set(t,"delivery",I.DELIVERY_TYPES.USER_SCHEDULED),g.default.set(t,"summary",""),t}if(e&&void 0===e.target){var n=g.default.cloneDeep(e);return g.default.set(n,"target",I.TARGET_TYPES.APP),n}return e||D}},{key:"renderNotificationModal",value:function(){var e=this.props,t=e.shortcuts,n=e.rawGroups,a=e.settings,r=e.modules,o=this.state.currentNotification,l=g.default.find(r,{name:I.RECURRING_FEATURE}),u=g.default.get(n,"data",[]),i=this.resolveCurrentNotification(),c=!!g.default.get(o,"id"),s=c?E.default.t(A.default.TITLE_EDIT_PUSH_NOTIFICATION_TEXT):E.default.t(A.default.TITLE_NEW_PUSH_NOTIFICATION_TEXT);return p.default.createElement("div",{className:"notifications-modal"},p.default.createElement("div",{className:"notifications-modal-title-container"},p.default.createElement(y.Button,{className:"btn-icon pull-left",onClick:this.handleHideNotificationModal},p.default.createElement(_.FontIcon,{name:"back",size:"24px"})),p.default.createElement("h3",{className:"notifications-modal-title"},s)),p.default.createElement(P.NotificationForm,{isEdit:c,groups:u,shortcuts:t,onSubmit:this.handleFormSubmit,onCancel:this.handleHideNotificationModal,initialValues:i,settings:a,recurringEnabled:l,toogleRecurringFeature:this.handleToggleRecurringFeature}))}},{key:"renderNotificationInfoModal",value:function(){var e=this.props.shortcuts,t=this.state.currentNotification;return p.default.createElement("div",{className:"notifications-modal"},p.default.createElement("div",{className:"notifications-modal-title-container"},p.default.createElement(y.Button,{className:"btn-icon pull-left",onClick:this.handleHideNotificationModal},p.default.createElement(_.FontIcon,{name:"back",size:"24px"})),p.default.createElement("h3",{className:"notifications-modal-title"},E.default.t(A.default.INLINE_MODAL_TITLE))),p.default.createElement(P.NotificationInfoForm,{shortcuts:e,notification:t,onCancel:this.handleHideNotificationInfoModal}))}},{key:"render",value:function(){var e=this.props,t=e.notifications,n=e.rawNotifications,a=this.state,r=a.showNotificationModal,o=a.showNotificationInfoModal,l=!(0,N.isInitialized)(t)||(0,N.isBusy)(t),u=g.default.get(n,"data",[]);return p.default.createElement("div",{className:"notifications"},p.default.createElement(_.LoaderContainer,{isOverlay:!0,isLoading:l},!r&&!o&&p.default.createElement(p.default.Fragment,null,p.default.createElement(P.NotificationsTable,{notifications:u,onRowClick:this.handleRowClick,onAddClick:this.handleCreateNotificationClick,onDeleteClick:this.handleDeleteClick,onEditClick:this.handleEditClick}),p.default.createElement(_.Paging,{ref:"paging",hasNext:this.resolveHasNext(),hasPrevious:this.resolveHasPrev(),onNextPageClick:this.handleNextPageClick,onPreviousPageClick:this.handlePreviousPageClick})),r&&this.renderNotificationModal(),o&&this.renderNotificationInfoModal()),p.default.createElement(_.ConfirmModal,{className:"settings-page-modal-small",ref:this.confirmModal}))}}]),t}(p.Component);M.propTypes={appId:b.default.string,notifications:b.default.array,rawNotifications:b.default.object,groups:b.default.array,rawGroups:b.default.object,shortcuts:b.default.array,modules:b.default.array,loadNotifications:b.default.func,createNotification:b.default.func,updateNotification:b.default.func,deleteNotification:b.default.func,loadGroups:b.default.func,fetchShortcuts:b.default.func,fetchModules:b.default.func,createModule:b.default.func,removeModule:b.default.func,showAlert:b.default.func,onModalShown:b.default.func,settings:b.default.object};t.default=(0,m.connect)((function(e){return{notifications:(0,S.getNotifications)(e),rawNotifications:(0,S.getRawNotifications)(e),groups:(0,T.getGroups)(e),rawGroups:(0,T.getRawGroups)(e),shortcuts:(0,O.getShortcuts)(e),modules:(0,O.getModules)(e)}}),(function(e){return(0,h.bindActionCreators)({loadNotifications:S.loadNotifications,createNotification:S.createNotification,updateNotification:S.updateNotification,deleteNotification:S.deleteNotification,loadGroups:T.loadGroups,fetchShortcuts:O.fetchShortcuts,fetchModules:O.fetchModules,createModule:O.createModule,removeModule:O.removeModule},e)}))(M)},1582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationForm",{enumerable:!0,get:function(){return a.NotificationForm}}),Object.defineProperty(t,"NotificationInfoForm",{enumerable:!0,get:function(){return r.NotificationInfoForm}}),Object.defineProperty(t,"NotificationsTable",{enumerable:!0,get:function(){return o.NotificationsTable}}),Object.defineProperty(t,"SummaryFields",{enumerable:!0,get:function(){return l.SummaryFields}});var a=n(1583),r=n(1593),o=n(1597),l=n(824)},1583:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationForm",{enumerable:!0,get:function(){return r.default}});var r=a(n(1584))},1584:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(23)),l=a(n(8)),u=a(n(9)),i=a(n(11)),c=a(n(12)),s=a(n(6)),d=a(n(10)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),p=n(18),m=a(n(208)),v=a(n(19)),E=a(n(27)),g=a(n(20)),b=a(n(0)),h=n(320),y=n(202),_=n(37),O=n(206),j=n(56),N=n(823),T=n(819),P=n(824),I=a(n(1591));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function R(e,t,n){return t=(0,c.default)(t),(0,i.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}n(1592);var A=function(e){function t(e){var n,a;return(0,l.default)(this,t),a=R(this,t,[e]),(0,v.default)((0,s.default)(a)),a.TARGET_OPTIONS=[{value:j.TARGET_TYPES.APP,label:E.default.t(I.default.TARGET_APP_LABEL)},{value:j.TARGET_TYPES.URL,label:E.default.t(I.default.TARGET_URL_LABEL)},{value:j.TARGET_TYPES.SCREEN,label:E.default.t(I.default.TARGET_SCREEN_LABEL)}],a.AUDIENCE_OPTIONS=[{value:j.AUDIENCE_TYPES.ALL,label:E.default.t(I.default.AUDIENCE_ALL_LABEL)},{value:j.AUDIENCE_TYPES.GROUP,label:E.default.t(I.default.AUDIENCE_GROUP_LABEL)}],a.DELIVERY_OPTIONS=[{value:j.DELIVERY_TYPES.NOW,label:E.default.t(I.default.DELIVERY_NOW_LABEL)},{value:j.DELIVERY_TYPES.SCHEDULED,label:E.default.t(I.default.DELIVERY_SCHEDULED_LABEL)}],a.RECURRING_PERIOD_OPTIONS=[{value:j.RECURRING_PERIOD_TYPES.NONE,label:E.default.t(I.default.RECURRING_PERIOD_NONE)},{value:j.RECURRING_PERIOD_TYPES.EVERY_DAY,label:E.default.t(I.default.RECURRING_PERIOD_EVERY_DAY)},{value:j.RECURRING_PERIOD_TYPES.EVERY_7_DAYS,label:E.default.t(I.default.RECURRING_PERIOD_EVERY_7_DAYS)},{value:j.RECURRING_PERIOD_TYPES.EVERY_30_DAYS,label:E.default.t(I.default.RECURRING_PERIOD_EVERY_30_DAYS)}],null!==(n=e.settings)&&void 0!==n&&n.scheduledNotificationsEnabled&&a.DELIVERY_OPTIONS.push({value:j.DELIVERY_TYPES.USER_SCHEDULED,label:E.default.t(I.default.DELIVERY_USER_SCHEDULED_LABEL)}),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fields,n=t.delivery,a=t.summaries;e.isEdit||n.value!==j.DELIVERY_TYPES.USER_SCHEDULED||a.onChange([""])}},{key:"handleTargetChanged",value:function(e){var t=this.props.fields.target,n=g.default.get(e,"value");t.onChange(n)}},{key:"handleAudienceGroupsChange",value:function(e){var t=this.props,n=t.touch;t.fields.audienceGroupIds.onChange(e),n("audienceGroupIds")}},{key:"handleAudienceGroupsTouched",value:function(e){var t=this.props.touch;e||t("audienceGroupIds")}},{key:"handleAudienceSelect",value:function(e){this.props.fields.audience.onChange(e)}},{key:"handleDeliverySelect",value:function(e){var t=this.props,n=t.fields,a=n.delivery,r=n.summaries,o=(n.target,t.isEdit),l=t.touch;e.value===j.DELIVERY_TYPES.USER_SCHEDULED&&a.value!==j.DELIVERY_TYPES.USER_SCHEDULED&&(r.onChange([""]),o&&l("numberOfMessages")),e.value!==j.DELIVERY_TYPES.USER_SCHEDULED&&r.onChange([]),a.onChange(e.value)}},{key:"handleRecurringPeriodSelect",value:function(e){this.props.fields.recurringPeriod.onChange(e.value)}},{key:"handleSummariesChange",value:function(){(0,this.props.touch)("numberOfMessages")}},{key:"render",value:function(){var e=this.props,t=e.groups,n=e.shortcuts,a=e.submitting,r=e.invalid,l=e.recurringEnabled,u=e.fields,i=e.fields,c=i.id,s=i.target,d=i.contentUrl,v=i.shortcutId,g=i.audience,b=i.audienceGroupIds,h=i.title,y=i.summary,N=i.numberOfMessages,S=i.delivery,R=i.deliveryTime,A=i.recurringPeriod,L=e.onCancel,C=e.handleSubmit,D=e.error,M=!!c.value,w=g.value===j.AUDIENCE_TYPES.ALL,U=S.value===j.DELIVERY_TYPES.NOW,k=S.value!==j.DELIVERY_TYPES.USER_SCHEDULED,G=S.value!==j.DELIVERY_TYPES.USER_SCHEDULED,B=s.value===j.TARGET_TYPES.URL,F=s.value===j.TARGET_TYPES.SCREEN,x=S.value!==j.DELIVERY_TYPES.USER_SCHEDULED&&j.DISPLAY_TIME_FORMAT;return f.default.createElement("form",{className:"notification-form",onSubmit:C},f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:5},f.default.createElement(p.FormGroup,{controlId:"audience"},f.default.createElement(p.ControlLabel,null,E.default.t(I.default.AUDIENCE_LABEL)),f.default.createElement(_.RadioSelector,{className:"notification-form__radio-selector",groupName:"audience",options:this.AUDIENCE_OPTIONS,activeValue:g.value,onSelect:this.handleAudienceSelect}))),f.default.createElement(p.Col,{xs:7,className:"notification-form__select"},f.default.createElement(_.ReduxFormElement,{disabled:a||w,elementId:"audienceGroupIds",field:b},f.default.createElement(O.GroupsDropdown,{className:"notification-form__groups",onSelectionChanged:this.handleAudienceGroupsChange,onToggle:this.handleAudienceGroupsTouched,selectedGroupIds:b.value,groups:t})))),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:5},f.default.createElement(p.FormGroup,{className:"recurring-switch-group",controlId:"recurring-switch"},f.default.createElement(p.ControlLabel,null,E.default.t(I.default.ENABLE_RECURRING_LABEL)),f.default.createElement(_.Switch,{onChange:this.props.toogleRecurringFeature,value:l}))),f.default.createElement(p.Col,{xs:7,className:"notification-form__recurring-period-select"},f.default.createElement(p.FormGroup,{controlId:"recurring-select"},f.default.createElement(p.ControlLabel,null,E.default.t(I.default.RECURRING_PERIOD_LABEL)),f.default.createElement(m.default,{className:"notification-form__recurring-period-selector",clearable:!1,disabled:!l,elementId:"recurringPeriod",name:"recurringPeriod",onChange:this.handleRecurringPeriodSelect,options:this.RECURRING_PERIOD_OPTIONS,value:A.value})))),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:5},f.default.createElement(p.FormGroup,{controlId:"delivery"},f.default.createElement(p.ControlLabel,null,E.default.t(I.default.DELIVERY_LABEL)),f.default.createElement(m.default,{className:"notification-form__delivery-selector",clearable:!1,elementId:"delivery",name:"delivery",onChange:this.handleDeliverySelect,options:this.DELIVERY_OPTIONS,value:S.value}))),f.default.createElement(p.Col,{xs:7},f.default.createElement(_.ReduxFormElement,{disabled:a||U,elementId:"deliveryTime",field:R},f.default.createElement(_.DateTimePicker,{clearable:!1,utc:!1,inputProps:{placeholder:E.default.t(I.default.DATE_PICKER_LABEL),disabled:a||U},dateFormat:j.DISPLAY_DATE_FORMAT,timeFormat:x})))),k&&f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:5},f.default.createElement(p.FormGroup,{controlId:"target"},f.default.createElement(p.ControlLabel,null,E.default.t(I.default.TARGET_LABEL)),f.default.createElement(m.default,{clearable:!1,disabled:a,elementId:"target",name:"target",onChange:this.handleTargetChanged,options:this.TARGET_OPTIONS,value:s.value}))),f.default.createElement(p.Col,{xs:7},B&&f.default.createElement(_.ReduxFormElement,{disabled:a,elementId:"contentUrl",field:d,name:E.default.t(I.default.CONTENT_URL_INPUT_LABEL)}),F&&f.default.createElement(_.ReduxFormElement,{disabled:a,elementId:"shortcutId",field:v,name:E.default.t(I.default.SCREEN_INPUT_LABEL)},f.default.createElement(T.ShortcutsDropdown,{shortcuts:n,shortcut:v.value})))),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:12},f.default.createElement(_.ReduxFormElement,{elementId:"title",name:E.default.t(I.default.TITLE_INPUT_LABEL),maxLength:255,disabled:a,field:h}))),S.value!==j.DELIVERY_TYPES.USER_SCHEDULED&&f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:12},f.default.createElement(_.ReduxFormElement,{disabled:a,elementId:"summary",name:E.default.t(I.default.SUMMARY_INPUT_LABEL),field:y},f.default.createElement(p.FormControl,(0,o.default)({componentClass:"textarea",maxLength:2e3},y))))),S.value===j.DELIVERY_TYPES.USER_SCHEDULED&&f.default.createElement(f.default.Fragment,null,f.default.createElement(p.FormGroup,null,f.default.createElement(P.SummaryFields,{fields:u,name:E.default.t(I.default.SUMMARY_INPUT_LABEL),onSummariesChange:this.handleSummariesChange,submitting:a})),f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:12},f.default.createElement(_.ReduxFormElement,{className:"notification-form__daily-number",disabled:a||G,elementId:"numberOfMessages",name:E.default.t(I.default.NUMBER_OF_NOTIFICATIONS),field:N},f.default.createElement(p.FormControl,(0,o.default)({type:"number",min:1},N)))))),f.default.createElement(p.ButtonToolbar,null,f.default.createElement(p.Button,{bsSize:"large",bsStyle:"primary",disabled:a||r,type:"submit"},f.default.createElement(_.LoaderContainer,{isLoading:a},M?E.default.t(I.default.BUTTON_SAVE):E.default.t(I.default.BUTTON_CREATE))),f.default.createElement(p.Button,{bsSize:"large",disabled:a,onClick:L},E.default.t(I.default.BUTTON_CANCEL))),D&&f.default.createElement("div",{className:"has-error"},f.default.createElement(p.HelpBlock,null,D)))}}]),t}(f.Component);A.propTypes={handleSubmit:b.default.func,groups:b.default.array,shortcuts:b.default.array,submitting:b.default.bool,invalid:b.default.bool,fields:b.default.object,onCancel:b.default.func,touch:b.default.func,error:b.default.string,isEdit:b.default.bool,settings:b.default.object,scheduledNotificationsEnabled:b.default.bool,recurringEnabled:b.default.bool,toogleRecurringFeature:b.default.func};t.default=(0,h.reduxForm)({getFormState:y.getFormState,form:"notificationForm",fields:["id","target","contentUrl","shortcutId","audience","audienceGroupIds","title","summary","summaries","numberOfMessages","delivery","deliveryTime","recurringPeriod","iconUrl","imageUrl"],validate:N.validateNotification})(A)},1585:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.mapModelToView=function(e){if(!e)return null;var t={};if(r.default.set(t,"id",e.id),"Silent"===e.type){var n=JSON.parse(r.default.get(e,"content.body")),a=r.default.map(n.actions,(function(e){return e.message}));r.default.set(t,"summaries",a),r.default.set(t,"numberOfMessages",n.numberOfMessages),r.default.set(t,"type","Silent")}var c=r.default.get(e,"audience.type");if(r.default.set(t,"audience",c),c===l.AUDIENCE_TYPES.GROUP){var s=r.default.get(e,"audience.groups"),d=r.default.map(s,(function(e){return r.default.toString(e.id)}));r.default.set(t,"audienceGroupIds",d),r.default.set(t,"audienceGroups",s)}var f=JSON.parse(r.default.get(e,"content.body")),p=r.default.get(f,"action.type");p===u&&(r.default.set(t,"target",l.TARGET_TYPES.URL),r.default.set(t,"contentUrl",r.default.get(e,"content.contentUrl")));p===i&&(r.default.set(t,"target",l.TARGET_TYPES.SCREEN),r.default.set(t,"shortcutId",r.default.get(f,"action.shortcutId")));r.default.set(t,"title",r.default.get(e,"content.title")),r.default.set(t,"summary",r.default.get(e,"content.summary")),r.default.set(t,"iconUrl",r.default.get(e,"content.iconUrl")),r.default.set(t,"imageUrl",r.default.get(e,"content.imageUrl"));var m=r.default.get(e,"deliveryTime");if(m){var v=o.default.utc(m).toISOString();r.default.set(t,"deliveryTime",v)}else r.default.set(t,"deliveryTime",m);e.active?r.default.set(t,"delivery",l.DELIVERY_TYPES.SCHEDULED):r.default.set(t,"delivery",l.DELIVERY_TYPES.NOW);return r.default.set(t,"recurringPeriod",r.default.get(e,"recurringPeriod")),t},t.mapViewToModel=function(e){if(!e)return null;var t={};e.id&&r.default.set(t,"id",e.id);var n=e.delivery===l.DELIVERY_TYPES.USER_SCHEDULED;if(n){var a=e.action,c=e.numberOfMessages,s=r.default.filter(e.summaries,(function(e){return!r.default.isEmpty(e)})),d={silent:!0,isMultiple:!0,numberOfMessages:c,action:a,actions:r.default.map(s,(function(e){return{message:e}}))};r.default.set(t,"content.body",JSON.stringify(d)),r.default.set(t,"type","Silent"),r.default.set(e,"target.type",null),r.default.set(t,"delivery",l.DELIVERY_TYPES.SCHEDULED)}if(!n&&e.target===l.TARGET_TYPES.APP){var f={action:{route:{key:"push-".concat((new Date).getTime().toString()),props:{title:e.title}}}};r.default.set(t,"target.type",e.target),r.default.set(t,"content.body",JSON.stringify(f))}if(!n&&e.target===l.TARGET_TYPES.URL){var p={action:{route:{key:"push-".concat((new Date).getTime().toString()),screen:"shoutem.web-view.WebViewScreen",props:{url:e.contentUrl,title:e.title,showNavigationToolbar:!0}},type:u}};r.default.set(t,"target.type",e.target),r.default.set(t,"content.body",JSON.stringify(p))}if(!n&&e.target===l.TARGET_TYPES.SCREEN){var m={action:{type:i,navigationAction:"shoutem.navigation.OPEN_MODAL",shortcutId:e.shortcutId}};r.default.set(t,"content.body",JSON.stringify(m))}if(r.default.set(t,"audience.type",e.audience),e.audience===l.AUDIENCE_TYPES.GROUP){var v=r.default.map(e.audienceGroupIds,(function(e){return{id:e}}));r.default.set(t,"audience.groups",v)}n||r.default.set(t,"delivery",e.delivery);if(e.delivery!==l.DELIVERY_TYPES.NOW){var E=o.default.utc(e.deliveryTime).toISOString();r.default.set(t,"deliveryTime",E)}e.target===l.TARGET_TYPES.URL&&r.default.set(t,"content.contentUrl",e.contentUrl);var g=r.default.get(e,"iconUrl");r.default.isEmpty(g)||r.default.set(t,"content.iconUrl",e.iconUrl);var b=r.default.get(e,"imageUrl");r.default.isEmpty(b)||r.default.set(t,"content.imageUrl",e.imageUrl);return r.default.set(t,"content.title",e.title),r.default.set(t,"content.summary",e.summary),r.default.set(t,"recurringPeriod",e.recurringPeriod),t};var r=a(n(20)),o=a(n(4)),l=n(56),u="shoutem.navigation.OPEN_MODAL",i="shoutem.application.EXECUTE_SHORTCUT"},1586:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.validateNotification=function(e){return{summary:i(e),shortcutId:c(e),audienceGroupIds:s(e),deliveryTime:d(e),numberOfMessages:f(e)}};var r=a(n(27)),o=a(n(20)),l=n(56),u=a(n(1587));function i(e){var t=e.delivery,n=e.summary;return t===l.DELIVERY_TYPES.USER_SCHEDULED||n?null:r.default.t(u.default.VALUE_REQUIRED_TEXT)}function c(e){var t=e.delivery,n=e.shortcutId,a=e.target;return a&&a!==l.TARGET_TYPES.URL&&a!==l.TARGET_TYPES.APP&&t!==l.DELIVERY_TYPES.USER_SCHEDULED?n?null:r.default.t(u.default.VALUE_REQUIRED_TEXT):null}function s(e){var t=e.audienceGroupIds;return e.audience===l.AUDIENCE_TYPES.ALL||t?null:r.default.t(u.default.VALUE_REQUIRED_TEXT)}function d(e){var t=e.deliveryTime;return e.delivery===l.DELIVERY_TYPES.NOW||t?null:r.default.t(u.default.VALUE_REQUIRED_TEXT)}function f(e){var t=e.delivery,n=e.numberOfMessages,a=e.summaries;if(t!==l.DELIVERY_TYPES.USER_SCHEDULED)return null;var i=o.default.filter(a,(function(e){return""!==e}));return!n||n<1||n>i.length?r.default.t(u.default.NUMBER_NOT_IN_RANGE_TEXT):null}},1587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notifications-services",r="".concat(a,".value-required-text"),o="".concat(a,".number-not-in-range-text");t.default={VALUE_REQUIRED_TEXT:r,NUMBER_NOT_IN_RANGE_TEXT:o}},1588:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(62)),l=a(n(8)),u=a(n(9)),i=a(n(11)),c=a(n(12)),s=a(n(6)),d=a(n(10)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),p=n(18),m=a(n(19)),v=a(n(27)),E=a(n(20)),g=a(n(0)),b=n(37),h=a(n(1589));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function _(e,t,n){return t=(0,c.default)(t),(0,i.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}n(1590),(t.default=function(e){function t(e){var n;return(0,l.default)(this,t),n=_(this,t,[e]),(0,m.default)((0,s.default)(n)),n}return(0,d.default)(t,e),(0,u.default)(t,[{key:"handleAddSummaryField",value:function(){var e=this.props.fields.summaries,t=E.default.get(e,"value",[]);e.onChange([].concat((0,o.default)(t),[""]))}},{key:"handleRemoveSummaryField",value:function(e,t){var n=this.props,a=n.fields.summaries,r=n.onSummariesChange;e.stopPropagation();var l=(0,o.default)(a.value);l.splice(t,1),a.onChange(l),r()}},{key:"handleSummaryChange",value:function(e,t){var n=this.props,a=n.fields.summaries,r=n.onSummariesChange,l=(0,o.default)(a.value);l[t]=e.target.value,a.onChange(l),r()}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields.summaries,a=t.name,r=t.submitting;return E.default.map(n.value,(function(t,o){var l=o===n.value.length-1,u=1===n.value.length,i=u?12:11;return f.default.createElement(f.default.Fragment,null,f.default.createElement(p.Row,null,f.default.createElement(p.Col,{xs:i},f.default.createElement(p.ControlLabel,null,a),f.default.createElement(p.FormControl,{componentClass:"textarea",disabled:r,maxLength:255,onChange:function(t){return e.handleSummaryChange(t,o)},value:t})),!u&&f.default.createElement(p.Col,{xs:1},f.default.createElement("div",{className:"summary-fields__delete-summary-field"},f.default.createElement(p.Button,{className:"btn-icon",onClick:function(t){e.handleRemoveSummaryField(t,o)}},f.default.createElement(b.FontIcon,{name:"delete",size:"24px"}))))),l&&f.default.createElement("div",{className:"summary-fields__add-summary-field"},f.default.createElement(p.Button,{className:"btn-icon",onClick:e.handleAddSummaryField},f.default.createElement(b.IconLabel,{iconName:"add"},v.default.t(h.default.ADD_NEW_SUMMARY)))))}))}}]),t}(f.Component)).propTypes={fields:g.default.arrayOf(g.default.object).isRequired,name:g.default.string,onAddSummaryField:g.default.func.isRequired,onSummariesChange:g.default.func,submitting:g.default.bool}},1589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("summary-fields",".add-new-summary");t.default={ADD_NEW_SUMMARY:a}},1590:function(e,t,n){},1591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notification-form",r="".concat(a,".target-app-label"),o="".concat(a,".target-url-label"),l="".concat(a,".target-screen-label"),u="".concat(a,".audience-all-label"),i="".concat(a,".audience-group-label"),c="".concat(a,".delivery-now-label"),s="".concat(a,".delivery-scheduled-label"),d="".concat(a,".delivery-user-scheduled-label"),f="".concat(a,".target-label"),p="".concat(a,".content-url-input-label"),m="".concat(a,".screen-input-label"),v="".concat(a,".audience-label"),E="".concat(a,".delivery-label"),g="".concat(a,".date-picker-label"),b="".concat(a,".title-input-label"),h="".concat(a,".summary-input-label"),y="".concat(a,".number-of-notifications-input-label"),_="".concat(a,".button-save"),O="".concat(a,".button-create"),j="".concat(a,".button-cancel"),N="".concat(a,".enable-recurring-label"),T="".concat(a,".recurring-period-label"),P="".concat(a,".recurring-period-none"),I="".concat(a,".recurring-period-every-day"),S="".concat(a,".recurring-period-every-7-days"),R="".concat(a,".recurring-period-every-30-days");t.default={TARGET_APP_LABEL:r,TARGET_URL_LABEL:o,TARGET_SCREEN_LABEL:l,AUDIENCE_ALL_LABEL:u,AUDIENCE_GROUP_LABEL:i,DELIVERY_NOW_LABEL:c,DELIVERY_SCHEDULED_LABEL:s,DELIVERY_USER_SCHEDULED_LABEL:d,TARGET_LABEL:f,CONTENT_URL_INPUT_LABEL:p,SCREEN_INPUT_LABEL:m,AUDIENCE_LABEL:v,DELIVERY_LABEL:E,DATE_PICKER_LABEL:g,TITLE_INPUT_LABEL:b,SUMMARY_INPUT_LABEL:h,NUMBER_OF_NOTIFICATIONS:y,BUTTON_SAVE:_,BUTTON_CREATE:O,BUTTON_CANCEL:j,ENABLE_RECURRING_LABEL:N,RECURRING_PERIOD_LABEL:T,RECURRING_PERIOD_NONE:P,RECURRING_PERIOD_EVERY_DAY:I,RECURRING_PERIOD_EVERY_7_DAYS:S,RECURRING_PERIOD_EVERY_30_DAYS:R}},1592:function(e,t,n){},1593:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInfoForm",{enumerable:!0,get:function(){return r.default}});var r=a(n(1594))},1594:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=a(n(19)),m=a(n(27)),v=a(n(20)),E=a(n(4)),g=a(n(0)),b=n(64),h=n(56),y=a(n(1595));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function O(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}n(1596),(t.default=function(e){function t(e){var n;return(0,o.default)(this,t),n=O(this,t,[e]),(0,p.default)((0,c.default)(n)),n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"renderTarget",value:function(){var e=this.props,t=e.shortcuts,n=e.notification,a=n.target,r=n.contentUrl,o=n.shortcutId;if(v.default.isUndefined(a))return null;if(a===h.TARGET_TYPES.URL)return d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"target"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.URL_INPUT_LABEL)),d.default.createElement(f.FormControl,{value:r}))));if(a===h.TARGET_TYPES.SCREEN){var l=(0,b.buildShortcutTree)(t),u=(0,b.createOptions)(l,"shortcut.key","shortcut.title"),i=v.default.find(u,{value:o}),c=v.default.get(i,"label");return d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"target"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.SCREEN_INPUT_LABEL)),d.default.createElement(f.FormControl,{value:c}))))}return null}},{key:"render",value:function(){var e=this.props,t=e.shortcuts,n=e.notification,a=n.target,r=(n.contentUrl,n.shortcutId),o=n.audience,l=n.audienceGroups,u=n.title,i=n.summary,c=n.summaries,s=n.numberOfMessages,p=n.deliveryTime,g=n.type,_=e.onCancel;m.default.t(y.default.URL_INPUT_LABEL);if(a===h.TARGET_TYPES.SCREEN){m.default.t(y.default.SCREEN_INPUT_LABEL);var O=(0,b.buildShortcutTree)(t),j=(0,b.createOptions)(O,"shortcut.key","shortcut.title"),N=v.default.find(j,{value:r});v.default.get(N,"label")}var T=m.default.t(y.default.AUDIENCE_ALL_VALUE);if(o===h.AUDIENCE_TYPES.GROUP){var P=v.default.map(l,(function(e){return v.default.truncate(e.name)}));T=v.default.join(P,", ")}var I=(0,E.default)(p).format(h.DISPLAY_DATE_TIME_FORMAT);return d.default.createElement("form",{className:"notification-info-form"},this.renderTarget(),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"audience"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.AUDIENCE_LABEL)),d.default.createElement(f.FormControl,{value:T})))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"deliveryTime"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.DELIVERY_LABEL)),d.default.createElement(f.FormControl,{value:I})))),d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"title"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.TITLE_LABEL)),d.default.createElement(f.FormControl,{value:u})))),"Silent"!==g&&d.default.createElement(f.Row,null,d.default.createElement(f.Col,{xs:12},d.default.createElement(f.FormGroup,{controlId:"summary"},d.default.createElement(f.ControlLabel,null,m.default.t(y.default.MESSAGE_LABEL)),d.default.createElement(f.FormControl,{componentClass:"textarea",value:i})))),"Silent"===g&&d.default.createElement(d.default.Fragment,null,v.default.map(c,(function(e){return d.default.createElement(f.FormGroup,null,d.default.createElement(f.ControlLabel,null,m.default.t(y.default.MESSAGE_LABEL)),d.default.createElement(f.FormControl,{componentClass:"textarea",value:e}))})),d.default.createElement(f.FormGroup,null,d.default.createElement(f.ControlLabel,null,m.default.t(y.default.NUMBER_OF_MESSAGES_LABEL)),d.default.createElement(f.FormControl,{value:s}))),d.default.createElement(f.ButtonToolbar,null,d.default.createElement(f.Button,{bsSize:"large",onClick:_},m.default.t(y.default.BUTTON_CANCEL))))}}]),t}(d.Component)).propTypes={notification:g.default.object,shortcuts:g.default.array,onCancel:g.default.func}},1595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notification-info-form",r="".concat(a,".url-input-label"),o="".concat(a,".screen-input-label"),l="".concat(a,".audience-all-label"),u="".concat(a,".audience-label"),i="".concat(a,".delivery-label"),c="".concat(a,".title-label"),s="".concat(a,".message-label"),d="".concat(a,".number-of-messages-label"),f="".concat(a,".button-cancel");t.default={URL_INPUT_LABEL:r,SCREEN_INPUT_LABEL:o,AUDIENCE_ALL_VALUE:l,AUDIENCE_LABEL:u,DELIVERY_LABEL:i,TITLE_LABEL:c,MESSAGE_LABEL:s,NUMBER_OF_MESSAGES_LABEL:d,BUTTON_CANCEL:f}},1596:function(e,t,n){},1597:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationsTable",{enumerable:!0,get:function(){return r.default}});var r=a(n(1598))},1598:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=a(n(19)),m=a(n(27)),v=a(n(20)),E=a(n(0)),g=n(37),b=n(56),h=a(n(1599));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function _(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}function O(e){return"group"===v.default.get(e,"audience.type")?m.default.t(h.default.AUDIENCE_GROUP_VALUE):m.default.t(h.default.AUDIENCE_ALL_VALUE)}function j(e){var t=v.default.get(e,"active"),n=v.default.get(e,"recurringPeriod"),a=t?"clock":"check";return t&&n!==b.RECURRING_PERIOD_TYPES.NONE&&(a="refresh"),d.default.createElement(g.FontIcon,{name:a,size:"24px"})}n(1600),(t.default=function(e){function t(e){var n;return(0,o.default)(this,t),n=_(this,t,[e]),(0,p.default)((0,c.default)(n)),n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"getRowDescriptors",value:function(){return[{getDisplayValue:j,isRequired:!0},{property:"content.summary",isRequired:!0},{getDisplayValue:O,isRequired:!0},{getDisplayValue:this.renderEditValue,isRequired:!1},{getDisplayValue:this.renderDeleteValue,isRequired:!1}]}},{key:"renderEditValue",value:function(e){var t=this.props.onEditClick;return v.default.get(e,"active")?d.default.createElement(f.Button,{className:"btn-icon pull-right",onClick:function(){return t(e)}},d.default.createElement(g.FontIcon,{name:"edit",size:"24px"})):null}},{key:"renderDeleteValue",value:function(e){var t=this.props.onDeleteClick;return d.default.createElement(f.Button,{className:"btn-icon pull-right",onClick:function(n){n.stopPropagation(),t(e)}},d.default.createElement(g.FontIcon,{name:"delete",size:"24px"}))}},{key:"render",value:function(){var e=this.props,t=e.notifications,n=e.onRowClick,a=e.onAddClick;return v.default.forEach(t,(function(e){if("Silent"===e.type)try{var t,n=JSON.parse(null===(t=e.content)||void 0===t?void 0:t.body);if(n){var a=v.default.map(n.actions,(function(e){return e.message}));v.default.isEmpty(a)||v.default.set(e,"content.summary",a.join(", "))}}catch(e){}})),d.default.createElement("div",{className:"notifications-table"},d.default.createElement("div",{className:"notifications-table__title"},d.default.createElement("h3",null,m.default.t(h.default.TABLE_TITLE)),d.default.createElement(f.Button,{className:"btn-icon pull-right",onClick:a},d.default.createElement(g.IconLabel,{iconName:"add"},m.default.t(h.default.BUTTON_CREATE_NEW)))),d.default.createElement(g.EditableTable,{isStatic:!0,canUpdate:!1,canDelete:!1,className:"notifications-table",emptyStateText:m.default.t(h.default.NO_NOTIFICATIONS_TEXT),headers:[m.default.t(h.default.HEADER_STATUS_LABEL),m.default.t(h.default.HEADER_MESSAGE_LABEL),m.default.t(h.default.HEADER_AUDIENCE_LABEL),"",""],rowDescriptors:this.getRowDescriptors(),rows:t,onRowClick:n}))}}]),t}(d.Component)).propTypes={notifications:E.default.array,onRowClick:E.default.func,onAddClick:E.default.func,onDeleteClick:E.default.func,onEditClick:E.default.func}},1599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notifications-table",r="".concat(a,".audience-group-label"),o="".concat(a,".audience-all-label"),l="".concat(a,".header-status-label"),u="".concat(a,".header-message-label"),i="".concat(a,".header-audience-label"),c="".concat(a,".table-title"),s="".concat(a,".button-create-new"),d="".concat(a,".no-notifications-text");t.default={AUDIENCE_GROUP_VALUE:r,AUDIENCE_ALL_VALUE:o,HEADER_STATUS_LABEL:l,HEADER_MESSAGE_LABEL:u,HEADER_AUDIENCE_LABEL:i,TABLE_TITLE:c,BUTTON_CREATE_NEW:s,NO_NOTIFICATIONS_TEXT:d}},1600:function(e,t,n){},1601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notifications-fragment",r="".concat(a,".confirm-modal-title"),o="".concat(a,".confirm-modal-message"),l="".concat(a,".confirm-modal-confirm-label"),u="".concat(a,".confirm-modal-abort-label"),i="".concat(a,".alert-scheduled-text"),c="".concat(a,".alert-sent-text"),s="".concat(a,".title-edit-push-notification-text"),d="".concat(a,".title-new-push-notification-text"),f="".concat(a,".inline-modal-title");t.default={CONFIRM_MODAL_TITLE:r,CONFIRM_MODAL_MESSAGE:o,CONFIRM_MODAL_CONFIRM_LABEL:l,CONFIRM_MODAL_ABORT_LABEL:u,ALERT_SCHEDULED_TEXT:i,ALERT_SENT_TEXT:c,TITLE_EDIT_PUSH_NOTIFICATION_TEXT:s,TITLE_NEW_PUSH_NOTIFICATION_TEXT:d,INLINE_MODAL_TITLE:f}},1602:function(e,t,n){},1603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="notifications-general-page",r="".concat(a,".button-save"),o="".concat(a,".error-message");t.default={BUTTON_SAVE:r,ERROR_MESSAGE:o}},1604:function(e,t,n){},1605:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupsPage",{enumerable:!0,get:function(){return r.default}});var r=a(n(1606))},1606:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(45),p=a(n(19)),m=a(n(20)),v=a(n(0)),E=n(206),g=n(772),b=n(52);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function y(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}var _=function(e){function t(e,n){var a;(0,o.default)(this,t),a=y(this,t,[e,n]),(0,p.default)((0,c.default)(a));var r=e.appId,l=n.page,u=m.default.get(l,"pageContext.url.apps",{});return a.assetManager=new g.AssetManager({scopeType:"application",scopeId:r,assetPolicyHost:u}),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.appId;return d.default.createElement("div",{className:"groups-page"},d.default.createElement(E.Groups,{appId:e,assetManager:this.assetManager}))}}]),t}(d.Component);_.propTypes={appId:v.default.string.isRequired},_.contextTypes={page:v.default.object.isRequired};t.default=(0,f.connect)((function(e,t){var n=t.extensionName,a=(0,b.getExtension)(e,n);return{extension:a,appId:m.default.get(a,"app")}}))(_)},1607:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneysPage",{enumerable:!0,get:function(){return r.default}});var r=a(n(1608))},1608:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var o=a(n(57)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),u=n(18),i=n(45),c=a(n(27)),s=a(n(20)),d=a(n(0)),f=n(37),p=n(817),m=a(n(1609));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function E(e){var t=e.appId,n=(0,i.useDispatch)(),a=(0,l.useState)(!1),r=(0,o.default)(a,2),d=r[0],v=r[1],E=(0,l.useState)(),g=(0,o.default)(E,2),b=g[0],h=g[1],y=(0,l.useState)(!1),_=(0,o.default)(y,2),O=_[0],j=_[1],N=(0,l.useState)(!0),T=(0,o.default)(N,2),P=T[0],I=T[1];(0,l.useEffect)((function(){I(!0),n((0,p.fetchTriggers)(t)).catch((function(){return j(!0)})).finally((function(){return I(!1)}))}),[t,n]);var S=(0,l.useCallback)((function(){return v(!0)}),[]),R=(0,l.useCallback)((function(){return v(!1)}),[]),A=(0,l.useCallback)((function(){j(!1)}),[]),L=(0,l.useCallback)((function(){h(void 0),S()}),[S]),C=(0,l.useCallback)((function(e){h(e),S()}),[S]);return l.default.createElement(f.LoaderContainer,{isLoading:P,className:"general-settings-page settings-page is-wide"},O&&l.default.createElement(u.Alert,{bsStyle:"danger",onDismiss:A},c.default.t(m.default.ERROR_MESSAGE)),l.default.createElement(p.JourneysTable,{onAddClick:L,onEditClick:C,onRowClick:C}),d&&l.default.createElement(f.InlineModal,{className:"journeys-page-modal",onHide:R,title:c.default.t(m.default.ADD_JOURNEY_TITLE)},l.default.createElement(p.JourneyForm,{isEdit:!s.default.isEmpty(b),initialValues:b,onSubmit:R})))}n(1610),E.propTypes={appId:d.default.string.isRequired}},1609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_JOURNEY_TITLE:"journeys-page-add-journey-title",ERROR_MESSAGE:"journeys-page-error"}},1610:function(e,t,n){},1611:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationsPage",{enumerable:!0,get:function(){return r.default}});var r=a(n(1612))},1612:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),f=n(18),p=n(45),m=a(n(19)),v=a(n(3)),E=a(n(27)),g=a(n(20)),b=a(n(0)),h=n(39),y=n(814),_=n(821),O=n(52),j=n(24),N=a(n(1613));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function P(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}n(1614);var I=function(e){function t(e){var n;return(0,o.default)(this,t),n=P(this,t,[e]),(0,m.default)((0,c.default)(n)),n.state={showAlert:!1,alertMessage:null,isModalShown:!1},n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.appId,a=e.loadApplicationStatus;(0,j.shouldLoad)(e,t,"applicationStatus")&&a(n)}},{key:"hideAlert",value:function(){this.setState({showAlert:!1})}},{key:"removeAlertMessage",value:function(){this.setState({alertMessage:null})}},{key:"handleShowAlert",value:function(e){this.setState({showAlert:!0,alertMessage:e}),setTimeout(this.hideAlert,4e3)}},{key:"handleUpdateIsModalShown",value:function(e){this.setState({isModalShown:e})}},{key:"renderAlert",value:function(){var e=this.state,t=e.showAlert,n=e.alertMessage,a=(0,v.default)("notification-alert",{"notification-alert-show":t});return d.default.createElement(f.Alert,{bsStyle:"success",className:a},n)}},{key:"render",value:function(){var e=this.props,t=e.appId,n=e.applicationStatus,a=e.settings,r=this.state.isModalShown,o=(0,y.isPublished)(n);return d.default.createElement("div",{className:"notifications-page"},!r&&d.default.createElement(d.default.Fragment,null,!o&&d.default.createElement(f.Alert,{className:"publish-alert"},E.default.t(N.default.PUBLISH_ALERT)),this.renderAlert()),d.default.createElement(_.Notifications,{appId:t,onModalShown:this.handleUpdateIsModalShown,showAlert:this.handleShowAlert,settings:a}))}}]),t}(d.Component);I.propTypes={appId:b.default.string.isRequired,applicationStatus:b.default.object,settings:b.default.object};t.default=(0,p.connect)((function(e,t){var n=t.extensionName,a=(0,O.getExtension)(e,n),r=g.default.get(a,"settings",{}),o=(0,y.getApplicationStatus)(e);return{extension:a,appId:g.default.get(a,"app"),applicationStatus:o,settings:r}}),(function(e){return(0,h.bindActionCreators)({loadApplicationStatus:y.loadApplicationStatus},e)}))(I)},1613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="".concat("notifications-page",".publish-alert");t.default={PUBLISH_ALERT:a}},1614:function(e,t,n){},1615:function(e,t,n){},1616:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PageProvider",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"connectPage",{enumerable:!0,get:function(){return r.default}});var r=a(n(1617)),o=a(n(1618)),l=a(n(1619))},1617:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.connectPageContext=s,t.default=function(){return function(e){return s((0,i.connect)(d)(e))}};var r=a(n(23)),o=a(n(1)),l=a(n(0)),u=a(n(20)),i=n(45),c=n(52);function s(e){function t(t,n){var a=n.page,l=u.default.pick(a.getPageContext(),["appId","appOwnerId","extensionName","ownExtensionName","shortcutId","screenId"]),i=a.getParameters();return o.default.createElement(e,(0,r.default)({},l,{parameters:i}))}return t.contextTypes={page:l.default.object},t}function d(e,t){var n=t.shortcutId,a=t.extensionName,r=t.ownExtensionName;return{shortcut:(0,c.getShortcut)(e,n),extension:(0,c.getExtension)(e,a),ownExtension:(0,c.getExtension)(e,r)}}},1618:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),o=a(n(8)),l=a(n(9)),u=a(n(34));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}t.default=function(){function e(t,n){(0,o.default)(this,e),this.pageContext=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ownExtensionName:(0,u.default)()},t),this.parameters=n}return(0,l.default)(e,[{key:"getPageContext",value:function(){return this.pageContext}},{key:"getParameters",value:function(){return this.parameters}}]),e}()},1619:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(8)),o=a(n(9)),l=a(n(11)),u=a(n(12)),i=a(n(10)),c=n(1),s=a(n(0));function d(e,t,n){return t=(0,u.default)(t),(0,l.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,u.default)(e).constructor):t.apply(e,n))}var f=t.default=function(e){function t(){return(0,r.default)(this,t),d(this,t,arguments)}return(0,i.default)(t,e),(0,o.default)(t,[{key:"getChildContext",value:function(){return{page:this.props.page}}},{key:"render",value:function(){var e=this.props.children;return c.Children.only(e)}}]),t}(c.PureComponent);f.propTypes={page:s.default.object,children:s.default.node},f.childContextTypes={page:s.default.object}},1620:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LocalizationProvider",{enumerable:!0,get:function(){return r.default}});var r=a(n(1621))},1621:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LocalizationProvider=void 0;var o=a(n(142)),l=a(n(143)),u=a(n(15)),i=a(n(8)),c=a(n(9)),s=a(n(11)),d=a(n(12)),f=a(n(6)),p=a(n(10)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(1)),v=a(n(0)),E=a(n(27)),g=n(1630),b=a(n(20)),h=n(45),y=n(37),_=a(n(1622));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function j(e,t,n){return t=(0,d.default)(t),(0,s.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}var N=t.LocalizationProvider=function(e){function t(e){var n;return(0,i.default)(this,t),(n=j(this,t,[e])).handleInjection=n.handleInjection.bind((0,f.default)(n)),n.state={inProgress:!0},n}var n;return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ownExtensionName,n=e.locale,a=e.translationUrl,r=b.default.get(_.default,t);E.default.use(g.initReactI18next).init({lng:"en",fallbackLng:"en",ns:[t],defaultNS:t,nsSeparator:!1,keySeparator:!1,resources:{en:(0,u.default)({},t,r)}}),this.handleInjection(n,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.locale,n=e.translationUrl,a=this.props,r=a.locale;a.translationUrl===n&&t===r||this.handleInjection(t,n)}},{key:"handleInjection",value:(n=(0,l.default)(o.default.mark((function e(t,n){var a,r,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.ownExtensionName,!n){e.next=19;break}return e.prev=2,e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:if(l=e.sent,!(u=b.default.get(l,a))){e.next=15;break}return e.next=13,E.default.addResourceBundle(t,a,u);case 13:return e.next=15,E.default.changeLanguage(t);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:this.setState({inProgress:!1});case 20:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(e,t){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.inProgress?m.default.createElement(y.LoaderContainer,{size:"50px",isLoading:!0}):e}}]),t}(m.PureComponent);N.propTypes={children:v.default.node,ownExtensionName:v.default.string,locale:v.default.string,translationUrl:v.default.string};t.default=(0,h.connect)((function(e,t){var n=t.context;return{ownExtensionName:b.default.get(n,"ownExtensionName"),locale:b.default.get(n,"i18n.locale"),translationUrl:b.default.get(n,"i18n.translationUrl")}}))(N)},1622:function(e){e.exports=JSON.parse('{"shoutem":{"notification-center":{"group-form.name-input-label":"Name","group-form.image-picker-label":"Image","group-form.image-help-text":"120x120px","group-form.subscribe-toggle-text":"Subscribe by default","group-form.button-save":"Save","group-form.button-add":"Add","group-form.button-cancel":"Cancel","groups.delete-modal-title":"Delete group","groups.delete-modal-message":"Are you sure you want to delete \\"{{groupName}}\\"? You will lose all users from that group already selected in the settings category.","groups.delete-modal-confirm-label":"Delete","groups.delete-modal-abort-label":"Cancel","groups.list-title":"List of notification groups","groups.add-group-label":"Add group","groups.groups-empty-text":"No groups yet","groups.add-group-modal-title":"Add group","groups-services.value-required-text":"Value is required","groups-dropdown.dropdown-placeholder":"Select group","notification-form.target-app-label":"App","notification-form.target-url-label":"URL","notification-form.target-screen-label":"Screen","notification-form.audience-all-label":"All","notification-form.audience-group-label":"Group","notification-form.delivery-now-label":"Now","notification-form.delivery-scheduled-label":"Scheduled","notification-form.delivery-user-scheduled-label":"User scheduled","notification-form.target-label":"Select what to open","notification-form.content-url-input-label":"URL to open","notification-form.screen-input-label":"Screen to open","notification-form.audience-label":"Audience","notification-form.delivery-label":"Delivery date and time","notification-form.date-picker-label":"Select date and time","notification-form.title-input-label":"Title","notification-form.summary-input-label":"Message","notification-form.number-of-notifications-input-label":"Selected number of daily user scheduled notifications","notification-form.button-save":"Save","notification-form.button-create":"Create","notification-form.button-cancel":"Cancel","notification-form.enable-recurring-label":"Enable recurring","notification-form.recurring-period-label":"Recurring period","notification-form.recurring-period-none":"None","notification-form.recurring-period-every-day":"Every day","notification-form.recurring-period-every-7-days":"Every 7 days","notification-form.recurring-period-every-30-days":"Every 30 days","notification-info-form.url-input-label":"URL to open","notification-info-form.screen-input-label":"Screen to open","notification-info-form.audience-all-label":"All","notification-info-form.audience-label":"Audience","notification-info-form.delivery-label":"Send date","notification-info-form.title-label":"Title","notification-info-form.message-label":"Message","notification-info-form.number-of-messages-label":"Selected number of daily user scheduled notifications","notification-info-form.button-cancel":"Cancel","notifications-table.audience-group-label":"Group","notifications-table.audience-all-label":"All","notifications-table.header-status-label":"Status","notifications-table.header-message-label":"Message","notifications-table.header-audience-label":"Audience","notifications-table.table-title":"List of notifications","notifications-table.button-create-new":"Create new","notifications-table.no-notifications-text":"No notifications yet","shortcuts-dropdown.dropdown-placeholder":"Screen to open","notifications-fragment.confirm-modal-title":"Delete notification","notifications-fragment.confirm-modal-message":"Are you sure you want to delete this notification?","notifications-fragment.confirm-modal-confirm-label":"Delete","notifications-fragment.confirm-modal-abort-label":"Cancel","notifications-fragment.alert-scheduled-text":"Notification scheduled","notifications-fragment.alert-sent-text":"Notification sent","notifications-fragment.title-edit-push-notification-text":"Edit push notification","notifications-fragment.title-new-push-notification-text":"New push notification","notifications-fragment.inline-modal-title":"Sent notification info","notifications-services.value-required-text":"Value is required","notifications-services.number-not-in-range-text":"Number has to be between 1 and number of summaries you\'ve entered","notifications-page.publish-alert":"Push notifications can\'t reach users until your app is published.","chime-uploader-fragment.chime-alert":"App needs to be republished in the store for chime sound to update","chime-uploader-fragment.error-file-reject":"File rejected.","chime-uploader-fragment.error-invalid-file-name":"Invalid file name. Chime sound name must start with a letter and may contain only letters, digits and underscores.","chime-uploader-fragment.error-upload-fail":"File upload failed.","chime-uploader-fragment.error-max-size":"Max allowed file size is {{size}}MB!","chime-uploader-fragment.settings-title":"Chime settings","chime-uploader-fragment.sound-title":"Select chime sound for push notification","notifications-general-page.button-save":"Save","notifications-general-page.error-message":"Reminder notification message is empty","notification-settings.disabled-label":"Disabled","notification-settings.enabled-label":"Enabled","notification-settings.reminder-label":"Reminder","chime-upload-input.button-browse":"Browse","notification-settings.pn-settings-title":"User\'s push notification settings","notification-settings.reminder-message-label":"Reminder notification message","notification-settings.scheduled-notifications-label":"User scheduled notification","summary-fields.add-new-summary":"Add another message","journeys-page-add-journey-title":"New push journey","journeys-page-error":"Something went wrong. Please try again later","journeys-title":"Notification journeys","journeys-table-title":"Title","journeys-table-add-new":"Add new","journeys-table-no-journeys-placeholder":"No journeys yet","journey-form-add-new-notification":"Add new notification","journey-form-field-required\'":"Field is required","journey-form-title-label":"Journey title","journey-form-save":"Save","journey-form-update-warning":"Note: Previously scheduled notifications will still dispatch per previous settings.\\n Update only affects future notifications.","journey-form-trigger-label":"What triggers the journey?","journey-form-no-available-triggers":"No available triggers","notification-input-delay-label":"Delay after the trigger","notification-input-minutes-label":"minutes","notification-input-minute-label":"minute","notification-input-hours-label":"hours","notification-input-hour-label":"hour","notification-input-day-label":"day","notification-input-days-label":"days","notification-input-body-label":"Notification body","notification-input-content-url-label":"Url to open","notification-input-content-shortcut-label":"Screen to open","notification-input-title":"Notification {{index}}","notification-input-notification-title-label":"Notification title","notification-input-target-url-label":"Url","notification-input-target-screen-label":"Screen","notification-input-target-label":"Select what to open","Notification title color":"Notification title color","Notification message color":"Notification message color","Notification timestamp color":"Notification timestamp color","Notification center":"Notification center"}}}')},1623:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SyncStateEngineProvider",{enumerable:!0,get:function(){return r.default}});var r=a(n(1624))},1624:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SyncStateEngineProvider=void 0;var r=a(n(62)),o=a(n(8)),l=a(n(9)),u=a(n(11)),i=a(n(12)),c=a(n(6)),s=a(n(10)),d=n(1),f=n(45),p=a(n(20)),m=a(n(0)),v=a(n(339)),E=a(n(34));function g(e,t,n){return t=(0,i.default)(t),(0,u.default)(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],(0,i.default)(e).constructor):t.apply(e,n))}var b=t.SyncStateEngineProvider=function(e){function t(e){var n;return(0,o.default)(this,t),(n=g(this,t,[e])).handleActions=n.handleActions.bind((0,c.default)(n)),n.handleSandboxMessage=n.handleSandboxMessage.bind((0,c.default)(n)),n.checkData=n.checkData.bind((0,c.default)(n)),n.syncStateEngine=n.props.syncStateEngine,v.default.subscribe(n.handleSandboxMessage),n.checkData(e),n}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.syncStateEngine.subscribeToActions(this.handleActions)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"componentWillUnmount",value:function(){this.syncStateEngine.unsubscribeFromActions(this.handleActions)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.state,a=e.state,o=this.syncStateEngine.calculateDifferences(n,a,(0,E.default)());o&&v.default.sendMessage.apply(v.default,(0,r.default)(o))}},{key:"handleActions",value:function(e,t){"builder"!==p.default.get(t,"id")&&v.default.sendMessage.apply(v.default,(0,r.default)(e))}},{key:"handleSandboxMessage",value:function(e){var t=this.syncStateEngine.processExternalChange(e,{id:"builder"});t&&this.props.syncAction(t)}},{key:"render",value:function(){var e=this.props.children;return d.Children.only(e)}}]),t}(d.PureComponent);b.propTypes={state:m.default.object,syncStateEngine:m.default.object,syncAction:m.default.func,children:m.default.node};t.default=(0,f.connect)((function(e){return{state:e}}),(function(e){return{syncAction:function(t){return e(t)}}}))(b)},1625:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=[l.default,u.apiMiddleware,i.apiStateMiddleware,(0,c.syncStateEngineMiddleware)(n)],r=(0,o.compose)(o.applyMiddleware.apply(void 0,a)),p=e.ownExtensionName,m=s.default.get(d,"reducer"),v=(0,i.enableRio)((0,f.createRootReducer)(p,m)),E=(0,c.enableStateSync)(v,n);return r(o.createStore)(E,t)},n(338);var o=n(39),l=a(n(1626)),u=n(135),i=n(24),c=n(767),s=a(n(20)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(770)),f=n(1627);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}},1627:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createRootReducer=function(e,t){return(0,o.combineReducers)((0,r.default)({core:l.reducer},e,t))};var r=a(n(15)),o=n(39),l=n(52)},202:function(e,t,n){"use strict";var a=n(2),r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormState=function(e){return function(e){return l.default.get(e,(0,m.default)(),{})}(e).form},t.invalidateCurrentBuild=function(e){var t={type:"shoutem.core.build-invalidate-actions",attributes:{buildType:"production"}},n={schema:"shoutem.core.build-invalidate-actions",request:{endpoint:v.shoutemUrls.appsApi("v1/apps/".concat(e,"/configurations/current/builds/actions/invalidate")),headers:{"Content-Type":"application/vnd.api+json",accept:"application/vnd.api+json"}}};return(0,c.create)(n,t)},t.reducer=void 0;var o=a(n(15)),l=a(n(20)),u=n(320),i=n(52),c=n(24),s=g(n(814)),d=g(n(206)),f=g(n(817)),p=g(n(821)),m=a(n(34)),v=n(64);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}t.reducer=function(){return(0,i.createScopedReducer)({extension:(0,o.default)((0,o.default)((0,o.default)((0,o.default)({form:u.reducer},s.moduleName,s.default),p.moduleName,p.default),f.moduleName,f.default),d.moduleName,d.default)})}},205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.APPLICATION_STATUS=void 0;t.moduleName="app",t.APPLICATION_STATUS="shoutem.core.application-statuses"},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Groups",{enumerable:!0,get:function(){return l.Groups}}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return r.GroupsDropdown}}),t.default=void 0,Object.defineProperty(t,"getGroups",{enumerable:!0,get:function(){return a.getGroups}}),Object.defineProperty(t,"getRawGroups",{enumerable:!0,get:function(){return a.getRawGroups}}),Object.defineProperty(t,"loadGroups",{enumerable:!0,get:function(){return a.loadGroups}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return o.moduleName}});var a=n(815),r=n(816),o=n(207),l=n(1552);t.default=a.reducer},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.GROUPS=void 0;t.moduleName="groups",t.GROUPS="shoutem.legacy.notification-groups"},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchTriggers",{enumerable:!0,get:function(){return a.fetchTriggers}}),Object.defineProperty(t,"getAvailableTriggers",{enumerable:!0,get:function(){return o.getAvailableTriggers}}),Object.defineProperty(t,"getJourneys",{enumerable:!0,get:function(){return o.getJourneys}}),Object.defineProperty(t,"getTriggers",{enumerable:!0,get:function(){return o.getTriggers}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return r.reducer}});var a=n(818),r=n(1556),o=n(1557)},34:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e?"".concat(r.default.name,".").concat(e):r.default.name};var r=a(n(1417))},56:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.TARGET_TYPES=t.RECURRING_PERIOD_TYPES=t.RECURRING_FEATURE=t.NOTIFICATIONS=t.DISPLAY_TIME_FORMAT=t.DISPLAY_DATE_TIME_FORMAT=t.DISPLAY_DATE_FORMAT=t.DELIVERY_TYPES=t.AUDIENCE_TYPES=void 0;var r=a(n(34));t.moduleName="notifications",t.NOTIFICATIONS="shoutem.legacy.notifications",t.DISPLAY_DATE_FORMAT="DD MMMM YYYY",t.DISPLAY_TIME_FORMAT="HH:mm",t.DISPLAY_DATE_TIME_FORMAT="DD MMM YYYY HH:mm",t.RECURRING_FEATURE=(0,r.default)("recurring-push"),t.TARGET_TYPES={APP:"none",URL:"url",SCREEN:"screen"},t.AUDIENCE_TYPES={ALL:"broadcast",GROUP:"group"},t.DELIVERY_TYPES={NOW:"now",SCHEDULED:"scheduled",USER_SCHEDULED:"user-scheduled"},t.RECURRING_PERIOD_TYPES={NONE:"none",EVERY_DAY:"everyDay",EVERY_7_DAYS:"every7Days",EVERY_30_DAYS:"every30Days"}},64:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildShortcutTree",{enumerable:!0,get:function(){return o.buildShortcutTree}}),Object.defineProperty(t,"createOptions",{enumerable:!0,get:function(){return o.createOptions}}),t.shoutemUrls=void 0;var r=a(n(1530)),o=n(1531);t.shoutemUrls=new r.default},770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageWillMount=function(e){t.reducer=(0,r.reducer)(),o.shoutemUrls.init(e)},t.reducer=t.pages=void 0;var a=n(1414),r=n(202),o=n(64);n(1615);t.pages={GeneralPage:a.GeneralPage,GroupsPage:a.GroupsPage,JourneysPage:a.JourneysPage,NotificationsPage:a.NotificationsPage},t.reducer=null},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeFilePreview",{enumerable:!0,get:function(){return a.ChimeFilePreview}}),Object.defineProperty(t,"ChimeUploadInput",{enumerable:!0,get:function(){return r.ChimeUploadInput}}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return o.NotificationSettings}});var a=n(1419),r=n(1427),o=n(1431)},814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"getApplicationStatus",{enumerable:!0,get:function(){return a.getApplicationStatus}}),Object.defineProperty(t,"isPublished",{enumerable:!0,get:function(){return o.isPublished}}),Object.defineProperty(t,"loadApplicationStatus",{enumerable:!0,get:function(){return a.loadApplicationStatus}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return r.moduleName}});var a=n(1528),r=n(205),o=n(1534);t.default=a.reducer},815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createGroup",{enumerable:!0,get:function(){return a.createGroup}}),Object.defineProperty(t,"deleteGroup",{enumerable:!0,get:function(){return a.deleteGroup}}),Object.defineProperty(t,"getGroups",{enumerable:!0,get:function(){return o.getGroups}}),Object.defineProperty(t,"getRawGroups",{enumerable:!0,get:function(){return o.getRawGroups}}),Object.defineProperty(t,"loadGroups",{enumerable:!0,get:function(){return a.loadGroups}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return r.reducer}}),Object.defineProperty(t,"updateGroup",{enumerable:!0,get:function(){return a.updateGroup}});var a=n(1536),r=n(1537),o=n(1538)},816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupForm",{enumerable:!0,get:function(){return a.GroupForm}}),Object.defineProperty(t,"GroupNode",{enumerable:!0,get:function(){return r.GroupNode}}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return o.GroupsDropdown}});var a=n(1539),r=n(1546),o=n(1549)},817:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return o.JourneyForm}}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return o.JourneysTable}}),t.default=void 0,Object.defineProperty(t,"fetchTriggers",{enumerable:!0,get:function(){return a.fetchTriggers}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return r.moduleName}});var a=n(329),r=n(114),o=n(1559);t.default=a.reducer},818:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.SAVE_JOURNEY_TRIGGERS=void 0,t.fetchTriggers=function(e){return function(){var t=(0,o.default)(r.default.mark((function t(n){var a,o,c;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={schema:"shoutem.campaign.journey-triggers",request:{endpoint:i.shoutemUrls.appsApi("v1/apps/".concat(e,"/journey-triggers")),headers:{Accept:"application/vnd.api+json"}}},t.prev=1,t.next=4,n((0,u.find)(a));case 4:return o=t.sent,c=l.default.get(o,"payload.data"),t.abrupt("return",n(s(c)));case 9:throw t.prev=9,t.t0=t.catch(1),console.error(t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},t.saveJourneyTriggers=s;var r=a(n(142)),o=a(n(143)),l=a(n(20)),u=n(24),i=n(64),c=t.SAVE_JOURNEY_TRIGGERS="SAVE_JOURNEY_TRIGGERS";function s(e){return{type:c,payload:e}}},819:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ShortcutsDropdown",{enumerable:!0,get:function(){return r.default}});var r=a(n(1565))},820:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={NOTIFICATION_INPUT_BODY_LABEL:"notification-input-body-label",NOTIFICATION_INPUT_CONTENT_SHORTCUT_LABEL:"notification-input-content-shortcut-label",NOTIFICATION_INPUT_CONTENT_URL_LABEL:"notification-input-content-url-label",NOTIFICATION_INPUT_DELAY_LABEL:"notification-input-delay-label",NOTIFICATION_INPUT_MINUTE_LABEL:"notification-input-minute-label",NOTIFICATION_INPUT_MINUTES_LABEL:"notification-input-minutes-label",NOTIFICATION_INPUT_HOUR_LABEL:"notification-input-hour-label",NOTIFICATION_INPUT_HOURS_LABEL:"notification-input-hours-label",NOTIFICATION_INPUT_DAY_LABEL:"notification-input-day-label",NOTIFICATION_INPUT_DAYS_LABEL:"notification-input-days-label",NOTIFICATION_INPUT_TARGET_LABEL:"notification-input-target-label",NOTIFICATION_INPUT_TARGET_URL:"notification-input-target-url-label",NOTIFICATION_INPUT_TARGET_SCREEN:"notification-input-target-screen-label",NOTIFICATION_INPUT_TITLE:"notification-input-title",NOTIFICATION_INPUT_TITLE_LABEL:"notification-input-notification-title-label"}},821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return o.Notifications}}),t.default=void 0,Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return r.moduleName}});var a=n(822),r=n(56),o=n(1580);t.default=a.reducer},822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createNotification",{enumerable:!0,get:function(){return a.createNotification}}),Object.defineProperty(t,"deleteNotification",{enumerable:!0,get:function(){return a.deleteNotification}}),Object.defineProperty(t,"getNotifications",{enumerable:!0,get:function(){return o.getNotifications}}),Object.defineProperty(t,"getRawNotifications",{enumerable:!0,get:function(){return o.getRawNotifications}}),Object.defineProperty(t,"loadNotifications",{enumerable:!0,get:function(){return a.loadNotifications}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return r.reducer}}),Object.defineProperty(t,"updateNotification",{enumerable:!0,get:function(){return a.updateNotification}});var a=n(1577),r=n(1578),o=n(1579)},823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"mapModelToView",{enumerable:!0,get:function(){return a.mapModelToView}}),Object.defineProperty(t,"mapViewToModel",{enumerable:!0,get:function(){return a.mapViewToModel}}),Object.defineProperty(t,"validateNotification",{enumerable:!0,get:function(){return r.validateNotification}});var a=n(1585),r=n(1586)},824:function(e,t,n){"use strict";var a=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SummaryFields",{enumerable:!0,get:function(){return r.default}});var r=a(n(1588))},839:function(e,t,n){"use strict";var a=n(2),r=n(13);n(840),n(338),n(339);var o=a(n(1)),l=a(n(22)),u=n(45),i=a(n(20)),c=a(n(51)),s=a(n(52)),d=n(37),f=n(24),p=n(767),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}(n(770)),v=n(1616),E=n(1620),g=n(1623),b=a(n(1625));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n(1628).polyfill();var y=new c.default(window.location.href),_=i.default.get(y.search(!0),"page",""),O=i.default.get(m,["pages",_]),j=new f.RioStateSerializer;document.addEventListener("shoutemready",(function(e){var t=j.deserialize(e.detail.config),n=t.context,a=t.parameters,r=t.state,c=new v.Page(n,a);s.default.init(n);var d=i.default.get(m,"pageWillMount");d&&d(c);var f=new p.SyncStateEngine({stateSerializer:j}),h=(0,b.default)(n,r,f);l.default.unmountComponentAtNode(document.getElementById("root")),l.default.render(o.default.createElement(u.Provider,{store:h},o.default.createElement(g.SyncStateEngineProvider,{syncStateEngine:f},o.default.createElement(E.LocalizationProvider,{context:n},o.default.createElement(v.PageProvider,{page:c},function(){if(!O)return o.default.createElement("div",null,"Page not found: ",_);var e=(0,v.connectPage)()(O);return o.default.createElement(e,null)}())))),document.getElementById("root"))}),!1),l.default.render(o.default.createElement(d.LoaderContainer,{size:"50px",isLoading:!0}),document.getElementById("root"))}});